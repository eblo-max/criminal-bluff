var xa=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Cg=xa((Jg,fe)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class Oa{constructor(){this.baseUrl="/api",this.token=localStorage.getItem("auth_token")}async fetchData(e,n="GET",r=null){var s,i;try{const o=`${this.baseUrl}${e}`,a={method:n,headers:{"Content-Type":"application/json"},credentials:"include"};this.token&&(a.headers.Authorization=`Bearer ${this.token}`),!this.token&&((i=(s=window.Telegram)==null?void 0:s.WebApp)!=null&&i.initData)&&(n==="GET"?a.headers["Telegram-Data"]=window.Telegram.WebApp.initData:r={...r,initData:window.Telegram.WebApp.initData}),n!=="GET"&&r&&(a.body=JSON.stringify(r));const c=await fetch(o,a),u=c.headers.get("X-Auth-Token");if(u&&(this.token=u,localStorage.setItem("auth_token",u)),!c.ok){const l=await c.json();throw new Error(l.message||"Ошибка при обращении к API")}return await c.json()}catch(o){throw console.error("API Error:",o),o}}async createOrUpdateUser(e){return this.fetchData("/user/create","POST",e)}async getUserProfile(){return this.fetchData("/user/profile")}async getUserAchievements(){return this.fetchData("/user/achievements")}async getUserStats(){return this.fetchData("/user/stats")}async startGame(){return this.fetchData("/game/start")}async submitAnswer(e){return this.fetchData("/game/answer","POST",e)}async finishGame(e){return this.fetchData("/game/finish","POST",e)}async getCurrentGame(){return this.fetchData("/game/current")}async getLeaderboard(e="daily"){return this.fetchData(`/leaderboard/${e}`)}async getUserPosition(e="all-time"){return this.fetchData("/leaderboard/user-position","GET",{period:e})}async getUserNeighbors(e=5){return this.fetchData(`/leaderboard/user-neighbors?range=${e}`)}async getAdminDashboard(){return this.fetchData("/admin/dashboard")}async getStories(e=1,n=20,r={}){const s=new URLSearchParams({page:e,limit:n,...r});return this.fetchData(`/admin/stories?${s.toString()}`)}async createStory(e){return this.fetchData("/admin/stories","POST",e)}async getStoryById(e){return this.fetchData(`/admin/stories/${e}`)}async updateStory(e,n){return this.fetchData(`/admin/stories/${e}`,"PUT",n)}async deleteStory(e){return this.fetchData(`/admin/stories/${e}`,"DELETE")}async getUsers(e=1,n=20,r={}){const s=new URLSearchParams({page:e,limit:n,...r});return this.fetchData(`/admin/users?${s.toString()}`)}async getUserById(e){return this.fetchData(`/admin/users/${e}`)}async updateUser(e,n){return this.fetchData(`/admin/users/${e}`,"PUT",n)}async getSystemStats(){return this.fetchData("/admin/stats")}}function Mi(t,e){return function(){return t.apply(e,arguments)}}const{toString:Na}=Object.prototype,{getPrototypeOf:Lr}=Object,fn=(t=>e=>{const n=Na.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),X=t=>(t=t.toLowerCase(),e=>fn(e)===t),pn=t=>e=>typeof e===t,{isArray:Ye}=Array,lt=pn("undefined");function ka(t){return t!==null&&!lt(t)&&t.constructor!==null&&!lt(t.constructor)&&W(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Bi=X("ArrayBuffer");function Pa(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Bi(t.buffer),e}const La=pn("string"),W=pn("function"),Fi=pn("number"),hn=t=>t!==null&&typeof t=="object",Da=t=>t===!0||t===!1,Gt=t=>{if(fn(t)!=="object")return!1;const e=Lr(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},$a=X("Date"),Ma=X("File"),Ba=X("Blob"),Fa=X("FileList"),Ua=t=>hn(t)&&W(t.pipe),Ha=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||W(t.append)&&((e=fn(t))==="formdata"||e==="object"&&W(t.toString)&&t.toString()==="[object FormData]"))},ja=X("URLSearchParams"),[qa,Ga,Wa,za]=["ReadableStream","Request","Response","Headers"].map(X),Ya=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function mt(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Ye(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function Ui(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const Ee=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Hi=t=>!lt(t)&&t!==Ee;function Zn(){const{caseless:t}=Hi(this)&&this||{},e={},n=(r,s)=>{const i=t&&Ui(e,s)||s;Gt(e[i])&&Gt(r)?e[i]=Zn(e[i],r):Gt(r)?e[i]=Zn({},r):Ye(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&mt(arguments[r],n);return e}const Va=(t,e,n,{allOwnKeys:r}={})=>(mt(e,(s,i)=>{n&&W(s)?t[i]=Mi(s,n):t[i]=s},{allOwnKeys:r}),t),Ja=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Xa=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Ka=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Lr(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Qa=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Za=t=>{if(!t)return null;if(Ye(t))return t;let e=t.length;if(!Fi(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},ec=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Lr(Uint8Array)),tc=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},nc=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},rc=X("HTMLFormElement"),sc=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),cs=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),ic=X("RegExp"),ji=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};mt(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},oc=t=>{ji(t,(e,n)=>{if(W(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(W(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},ac=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Ye(t)?r(t):r(String(t).split(e)),n},cc=()=>{},uc=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function lc(t){return!!(t&&W(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const dc=t=>{const e=new Array(10),n=(r,s)=>{if(hn(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=Ye(r)?[]:{};return mt(r,(o,a)=>{const c=n(o,s+1);!lt(c)&&(i[a]=c)}),e[s]=void 0,i}}return r};return n(t,0)},fc=X("AsyncFunction"),pc=t=>t&&(hn(t)||W(t))&&W(t.then)&&W(t.catch),qi=((t,e)=>t?setImmediate:e?((n,r)=>(Ee.addEventListener("message",({source:s,data:i})=>{s===Ee&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Ee.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",W(Ee.postMessage)),hc=typeof queueMicrotask<"u"?queueMicrotask.bind(Ee):typeof process<"u"&&process.nextTick||qi,g={isArray:Ye,isArrayBuffer:Bi,isBuffer:ka,isFormData:Ha,isArrayBufferView:Pa,isString:La,isNumber:Fi,isBoolean:Da,isObject:hn,isPlainObject:Gt,isReadableStream:qa,isRequest:Ga,isResponse:Wa,isHeaders:za,isUndefined:lt,isDate:$a,isFile:Ma,isBlob:Ba,isRegExp:ic,isFunction:W,isStream:Ua,isURLSearchParams:ja,isTypedArray:ec,isFileList:Fa,forEach:mt,merge:Zn,extend:Va,trim:Ya,stripBOM:Ja,inherits:Xa,toFlatObject:Ka,kindOf:fn,kindOfTest:X,endsWith:Qa,toArray:Za,forEachEntry:tc,matchAll:nc,isHTMLForm:rc,hasOwnProperty:cs,hasOwnProp:cs,reduceDescriptors:ji,freezeMethods:oc,toObjectSet:ac,toCamelCase:sc,noop:cc,toFiniteNumber:uc,findKey:Ui,global:Ee,isContextDefined:Hi,isSpecCompliantForm:lc,toJSONObject:dc,isAsyncFn:fc,isThenable:pc,setImmediate:qi,asap:hc};function v(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}g.inherits(v,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:g.toJSONObject(this.config),code:this.code,status:this.status}}});const Gi=v.prototype,Wi={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Wi[t]={value:t}});Object.defineProperties(v,Wi);Object.defineProperty(Gi,"isAxiosError",{value:!0});v.from=(t,e,n,r,s,i)=>{const o=Object.create(Gi);return g.toFlatObject(t,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),v.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const mc=null;function er(t){return g.isPlainObject(t)||g.isArray(t)}function zi(t){return g.endsWith(t,"[]")?t.slice(0,-2):t}function us(t,e,n){return t?t.concat(e).map(function(s,i){return s=zi(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function gc(t){return g.isArray(t)&&!t.some(er)}const _c=g.toFlatObject(g,{},null,function(e){return/^is[A-Z]/.test(e)});function mn(t,e,n){if(!g.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=g.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,_){return!g.isUndefined(_[m])});const r=n.metaTokens,s=n.visitor||l,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&g.isSpecCompliantForm(e);if(!g.isFunction(s))throw new TypeError("visitor must be a function");function u(f){if(f===null)return"";if(g.isDate(f))return f.toISOString();if(!c&&g.isBlob(f))throw new v("Blob is not supported. Use a Buffer instead.");return g.isArrayBuffer(f)||g.isTypedArray(f)?c&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function l(f,m,_){let S=f;if(f&&!_&&typeof f=="object"){if(g.endsWith(m,"{}"))m=r?m:m.slice(0,-2),f=JSON.stringify(f);else if(g.isArray(f)&&gc(f)||(g.isFileList(f)||g.endsWith(m,"[]"))&&(S=g.toArray(f)))return m=zi(m),S.forEach(function(I,H){!(g.isUndefined(I)||I===null)&&e.append(o===!0?us([m],H,i):o===null?m:m+"[]",u(I))}),!1}return er(f)?!0:(e.append(us(_,m,i),u(f)),!1)}const d=[],p=Object.assign(_c,{defaultVisitor:l,convertValue:u,isVisitable:er});function h(f,m){if(!g.isUndefined(f)){if(d.indexOf(f)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(f),g.forEach(f,function(S,T){(!(g.isUndefined(S)||S===null)&&s.call(e,S,g.isString(T)?T.trim():T,m,p))===!0&&h(S,m?m.concat(T):[T])}),d.pop()}}if(!g.isObject(t))throw new TypeError("data must be an object");return h(t),e}function ls(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Dr(t,e){this._pairs=[],t&&mn(t,this,e)}const Yi=Dr.prototype;Yi.append=function(e,n){this._pairs.push([e,n])};Yi.toString=function(e){const n=e?function(r){return e.call(this,r,ls)}:ls;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function yc(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Vi(t,e,n){if(!e)return t;const r=n&&n.encode||yc;g.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(e,n):i=g.isURLSearchParams(e)?e.toString():new Dr(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class ds{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){g.forEach(this.handlers,function(r){r!==null&&e(r)})}}const Ji={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Sc=typeof URLSearchParams<"u"?URLSearchParams:Dr,Ec=typeof FormData<"u"?FormData:null,bc=typeof Blob<"u"?Blob:null,Tc={isBrowser:!0,classes:{URLSearchParams:Sc,FormData:Ec,Blob:bc},protocols:["http","https","file","blob","url","data"]},$r=typeof window<"u"&&typeof document<"u",tr=typeof navigator=="object"&&navigator||void 0,vc=$r&&(!tr||["ReactNative","NativeScript","NS"].indexOf(tr.product)<0),wc=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ic=$r&&window.location.href||"http://localhost",Rc=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$r,hasStandardBrowserEnv:vc,hasStandardBrowserWebWorkerEnv:wc,navigator:tr,origin:Ic},Symbol.toStringTag,{value:"Module"})),M={...Rc,...Tc};function Ac(t,e){return mn(t,new M.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return M.isNode&&g.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function Cc(t){return g.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function xc(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function Xi(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=i>=n.length;return o=!o&&g.isArray(s)?s.length:o,c?(g.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!g.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&g.isArray(s[o])&&(s[o]=xc(s[o])),!a)}if(g.isFormData(t)&&g.isFunction(t.entries)){const n={};return g.forEachEntry(t,(r,s)=>{e(Cc(r),s,n,0)}),n}return null}function Oc(t,e,n){if(g.isString(t))try{return(e||JSON.parse)(t),g.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const gt={transitional:Ji,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=g.isObject(e);if(i&&g.isHTMLForm(e)&&(e=new FormData(e)),g.isFormData(e))return s?JSON.stringify(Xi(e)):e;if(g.isArrayBuffer(e)||g.isBuffer(e)||g.isStream(e)||g.isFile(e)||g.isBlob(e)||g.isReadableStream(e))return e;if(g.isArrayBufferView(e))return e.buffer;if(g.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Ac(e,this.formSerializer).toString();if((a=g.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return mn(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),Oc(e)):e}],transformResponse:[function(e){const n=this.transitional||gt.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(g.isResponse(e)||g.isReadableStream(e))return e;if(e&&g.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?v.from(a,v.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:M.classes.FormData,Blob:M.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};g.forEach(["delete","get","head","post","put","patch"],t=>{gt.headers[t]={}});const Nc=g.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kc=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&Nc[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},fs=Symbol("internals");function rt(t){return t&&String(t).trim().toLowerCase()}function Wt(t){return t===!1||t==null?t:g.isArray(t)?t.map(Wt):String(t)}function Pc(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const Lc=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Bn(t,e,n,r,s){if(g.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!g.isString(e)){if(g.isString(r))return e.indexOf(r)!==-1;if(g.isRegExp(r))return r.test(e)}}function Dc(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function $c(t,e){const n=g.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let q=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,c,u){const l=rt(c);if(!l)throw new Error("header name must be a non-empty string");const d=g.findKey(s,l);(!d||s[d]===void 0||u===!0||u===void 0&&s[d]!==!1)&&(s[d||c]=Wt(a))}const o=(a,c)=>g.forEach(a,(u,l)=>i(u,l,c));if(g.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(g.isString(e)&&(e=e.trim())&&!Lc(e))o(kc(e),n);else if(g.isHeaders(e))for(const[a,c]of e.entries())i(c,a,r);else e!=null&&i(n,e,r);return this}get(e,n){if(e=rt(e),e){const r=g.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return Pc(s);if(g.isFunction(n))return n.call(this,s,r);if(g.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=rt(e),e){const r=g.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Bn(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=rt(o),o){const a=g.findKey(r,o);a&&(!n||Bn(r,r[a],a,n))&&(delete r[a],s=!0)}}return g.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||Bn(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return g.forEach(this,(s,i)=>{const o=g.findKey(r,i);if(o){n[o]=Wt(s),delete n[i];return}const a=e?Dc(i):String(i).trim();a!==i&&delete n[i],n[a]=Wt(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return g.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&g.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[fs]=this[fs]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=rt(o);r[a]||($c(s,o),r[a]=!0)}return g.isArray(e)?e.forEach(i):i(e),this}};q.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);g.reduceDescriptors(q.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});g.freezeMethods(q);function Fn(t,e){const n=this||gt,r=e||n,s=q.from(r.headers);let i=r.data;return g.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function Ki(t){return!!(t&&t.__CANCEL__)}function Ve(t,e,n){v.call(this,t??"canceled",v.ERR_CANCELED,e,n),this.name="CanceledError"}g.inherits(Ve,v,{__CANCEL__:!0});function Qi(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new v("Request failed with status code "+n.status,[v.ERR_BAD_REQUEST,v.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Mc(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Bc(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),l=r[i];o||(o=u),n[s]=c,r[s]=u;let d=i,p=0;for(;d!==s;)p+=n[d++],d=d%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),u-o<e)return;const h=l&&u-l;return h?Math.round(p*1e3/h):void 0}}function Fc(t,e){let n=0,r=1e3/e,s,i;const o=(u,l=Date.now())=>{n=l,s=null,i&&(clearTimeout(i),i=null),t.apply(null,u)};return[(...u)=>{const l=Date.now(),d=l-n;d>=r?o(u,l):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},r-d)))},()=>s&&o(s)]}const Qt=(t,e,n=3)=>{let r=0;const s=Bc(50,250);return Fc(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,c=o-r,u=s(c),l=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&l?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},n)},ps=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},hs=t=>(...e)=>g.asap(()=>t(...e)),Uc=M.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,M.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(M.origin),M.navigator&&/(msie|trident)/i.test(M.navigator.userAgent)):()=>!0,Hc=M.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];g.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),g.isString(r)&&o.push("path="+r),g.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function jc(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function qc(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Zi(t,e,n){let r=!jc(e);return t&&(r||n==!1)?qc(t,e):e}const ms=t=>t instanceof q?{...t}:t;function Ie(t,e){e=e||{};const n={};function r(u,l,d,p){return g.isPlainObject(u)&&g.isPlainObject(l)?g.merge.call({caseless:p},u,l):g.isPlainObject(l)?g.merge({},l):g.isArray(l)?l.slice():l}function s(u,l,d,p){if(g.isUndefined(l)){if(!g.isUndefined(u))return r(void 0,u,d,p)}else return r(u,l,d,p)}function i(u,l){if(!g.isUndefined(l))return r(void 0,l)}function o(u,l){if(g.isUndefined(l)){if(!g.isUndefined(u))return r(void 0,u)}else return r(void 0,l)}function a(u,l,d){if(d in e)return r(u,l);if(d in t)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,l,d)=>s(ms(u),ms(l),d,!0)};return g.forEach(Object.keys(Object.assign({},t,e)),function(l){const d=c[l]||s,p=d(t[l],e[l],l);g.isUndefined(p)&&d!==a||(n[l]=p)}),n}const eo=t=>{const e=Ie({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=q.from(o),e.url=Vi(Zi(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let c;if(g.isFormData(n)){if(M.hasStandardBrowserEnv||M.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...l]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...l].join("; "))}}if(M.hasStandardBrowserEnv&&(r&&g.isFunction(r)&&(r=r(e)),r||r!==!1&&Uc(e.url))){const u=s&&i&&Hc.read(i);u&&o.set(s,u)}return e},Gc=typeof XMLHttpRequest<"u",Wc=Gc&&function(t){return new Promise(function(n,r){const s=eo(t);let i=s.data;const o=q.from(s.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=s,l,d,p,h,f;function m(){h&&h(),f&&f(),s.cancelToken&&s.cancelToken.unsubscribe(l),s.signal&&s.signal.removeEventListener("abort",l)}let _=new XMLHttpRequest;_.open(s.method.toUpperCase(),s.url,!0),_.timeout=s.timeout;function S(){if(!_)return;const I=q.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),$={data:!a||a==="text"||a==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:I,config:t,request:_};Qi(function(te){n(te),m()},function(te){r(te),m()},$),_=null}"onloadend"in _?_.onloadend=S:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(S)},_.onabort=function(){_&&(r(new v("Request aborted",v.ECONNABORTED,t,_)),_=null)},_.onerror=function(){r(new v("Network Error",v.ERR_NETWORK,t,_)),_=null},_.ontimeout=function(){let H=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const $=s.transitional||Ji;s.timeoutErrorMessage&&(H=s.timeoutErrorMessage),r(new v(H,$.clarifyTimeoutError?v.ETIMEDOUT:v.ECONNABORTED,t,_)),_=null},i===void 0&&o.setContentType(null),"setRequestHeader"in _&&g.forEach(o.toJSON(),function(H,$){_.setRequestHeader($,H)}),g.isUndefined(s.withCredentials)||(_.withCredentials=!!s.withCredentials),a&&a!=="json"&&(_.responseType=s.responseType),u&&([p,f]=Qt(u,!0),_.addEventListener("progress",p)),c&&_.upload&&([d,h]=Qt(c),_.upload.addEventListener("progress",d),_.upload.addEventListener("loadend",h)),(s.cancelToken||s.signal)&&(l=I=>{_&&(r(!I||I.type?new Ve(null,t,_):I),_.abort(),_=null)},s.cancelToken&&s.cancelToken.subscribe(l),s.signal&&(s.signal.aborted?l():s.signal.addEventListener("abort",l)));const T=Mc(s.url);if(T&&M.protocols.indexOf(T)===-1){r(new v("Unsupported protocol "+T+":",v.ERR_BAD_REQUEST,t));return}_.send(i||null)})},zc=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,a();const l=u instanceof Error?u:this.reason;r.abort(l instanceof v?l:new Ve(l instanceof Error?l.message:l))}};let o=e&&setTimeout(()=>{o=null,i(new v(`timeout ${e} of ms exceeded`,v.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>g.asap(a),c}},Yc=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},Vc=async function*(t,e){for await(const n of Jc(t))yield*Yc(n,e)},Jc=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},gs=(t,e,n,r)=>{const s=Vc(t,e);let i=0,o,a=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:l}=await s.next();if(u){a(),c.close();return}let d=l.byteLength;if(n){let p=i+=d;n(p)}c.enqueue(new Uint8Array(l))}catch(u){throw a(u),u}},cancel(c){return a(c),s.return()}},{highWaterMark:2})},gn=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",to=gn&&typeof ReadableStream=="function",Xc=gn&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),no=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Kc=to&&no(()=>{let t=!1;const e=new Request(M.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),_s=64*1024,nr=to&&no(()=>g.isReadableStream(new Response("").body)),Zt={stream:nr&&(t=>t.body)};gn&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Zt[e]&&(Zt[e]=g.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new v(`Response type '${e}' is not supported`,v.ERR_NOT_SUPPORT,r)})})})(new Response);const Qc=async t=>{if(t==null)return 0;if(g.isBlob(t))return t.size;if(g.isSpecCompliantForm(t))return(await new Request(M.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(g.isArrayBufferView(t)||g.isArrayBuffer(t))return t.byteLength;if(g.isURLSearchParams(t)&&(t=t+""),g.isString(t))return(await Xc(t)).byteLength},Zc=async(t,e)=>{const n=g.toFiniteNumber(t.getContentLength());return n??Qc(e)},eu=gn&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:u,headers:l,withCredentials:d="same-origin",fetchOptions:p}=eo(t);u=u?(u+"").toLowerCase():"text";let h=zc([s,i&&i.toAbortSignal()],o),f;const m=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let _;try{if(c&&Kc&&n!=="get"&&n!=="head"&&(_=await Zc(l,r))!==0){let $=new Request(e,{method:"POST",body:r,duplex:"half"}),K;if(g.isFormData(r)&&(K=$.headers.get("content-type"))&&l.setContentType(K),$.body){const[te,xt]=ps(_,Qt(hs(c)));r=gs($.body,_s,te,xt)}}g.isString(d)||(d=d?"include":"omit");const S="credentials"in Request.prototype;f=new Request(e,{...p,signal:h,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:r,duplex:"half",credentials:S?d:void 0});let T=await fetch(f);const I=nr&&(u==="stream"||u==="response");if(nr&&(a||I&&m)){const $={};["status","statusText","headers"].forEach(as=>{$[as]=T[as]});const K=g.toFiniteNumber(T.headers.get("content-length")),[te,xt]=a&&ps(K,Qt(hs(a),!0))||[];T=new Response(gs(T.body,_s,te,()=>{xt&&xt(),m&&m()}),$)}u=u||"text";let H=await Zt[g.findKey(Zt,u)||"text"](T,t);return!I&&m&&m(),await new Promise(($,K)=>{Qi($,K,{data:H,headers:q.from(T.headers),status:T.status,statusText:T.statusText,config:t,request:f})})}catch(S){throw m&&m(),S&&S.name==="TypeError"&&/fetch/i.test(S.message)?Object.assign(new v("Network Error",v.ERR_NETWORK,t,f),{cause:S.cause||S}):v.from(S,S&&S.code,t,f)}}),rr={http:mc,xhr:Wc,fetch:eu};g.forEach(rr,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ys=t=>`- ${t}`,tu=t=>g.isFunction(t)||t===null||t===!1,ro={getAdapter:t=>{t=g.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!tu(n)&&(r=rr[(o=String(n)).toLowerCase()],r===void 0))throw new v(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(ys).join(`
`):" "+ys(i[0]):"as no adapter specified";throw new v("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:rr};function Un(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ve(null,t)}function Ss(t){return Un(t),t.headers=q.from(t.headers),t.data=Fn.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ro.getAdapter(t.adapter||gt.adapter)(t).then(function(r){return Un(t),r.data=Fn.call(t,t.transformResponse,r),r.headers=q.from(r.headers),r},function(r){return Ki(r)||(Un(t),r&&r.response&&(r.response.data=Fn.call(t,t.transformResponse,r.response),r.response.headers=q.from(r.response.headers))),Promise.reject(r)})}const so="1.8.4",_n={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{_n[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const Es={};_n.transitional=function(e,n,r){function s(i,o){return"[Axios v"+so+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new v(s(o," has been removed"+(n?" in "+n:"")),v.ERR_DEPRECATED);return n&&!Es[o]&&(Es[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};_n.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function nu(t,e,n){if(typeof t!="object")throw new v("options must be an object",v.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],c=a===void 0||o(a,i,t);if(c!==!0)throw new v("option "+i+" must be "+c,v.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new v("Unknown option "+i,v.ERR_BAD_OPTION)}}const zt={assertOptions:nu,validators:_n},Q=zt.validators;let ve=class{constructor(e){this.defaults=e,this.interceptors={request:new ds,response:new ds}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ie(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&zt.assertOptions(r,{silentJSONParsing:Q.transitional(Q.boolean),forcedJSONParsing:Q.transitional(Q.boolean),clarifyTimeoutError:Q.transitional(Q.boolean)},!1),s!=null&&(g.isFunction(s)?n.paramsSerializer={serialize:s}:zt.assertOptions(s,{encode:Q.function,serialize:Q.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),zt.assertOptions(n,{baseUrl:Q.spelling("baseURL"),withXsrfToken:Q.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&g.merge(i.common,i[n.method]);i&&g.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),n.headers=q.concat(o,i);const a=[];let c=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(c=c&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const u=[];this.interceptors.response.forEach(function(m){u.push(m.fulfilled,m.rejected)});let l,d=0,p;if(!c){const f=[Ss.bind(this),void 0];for(f.unshift.apply(f,a),f.push.apply(f,u),p=f.length,l=Promise.resolve(n);d<p;)l=l.then(f[d++],f[d++]);return l}p=a.length;let h=n;for(d=0;d<p;){const f=a[d++],m=a[d++];try{h=f(h)}catch(_){m.call(this,_);break}}try{l=Ss.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,p=u.length;d<p;)l=l.then(u[d++],u[d++]);return l}getUri(e){e=Ie(this.defaults,e);const n=Zi(e.baseURL,e.url,e.allowAbsoluteUrls);return Vi(n,e.params,e.paramsSerializer)}};g.forEach(["delete","get","head","options"],function(e){ve.prototype[e]=function(n,r){return this.request(Ie(r||{},{method:e,url:n,data:(r||{}).data}))}});g.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(Ie(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ve.prototype[e]=n(),ve.prototype[e+"Form"]=n(!0)});let ru=class io{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Ve(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new io(function(s){e=s}),cancel:e}}};function su(t){return function(n){return t.apply(null,n)}}function iu(t){return g.isObject(t)&&t.isAxiosError===!0}const sr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sr).forEach(([t,e])=>{sr[e]=t});function oo(t){const e=new ve(t),n=Mi(ve.prototype.request,e);return g.extend(n,ve.prototype,e,{allOwnKeys:!0}),g.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return oo(Ie(t,s))},n}const P=oo(gt);P.Axios=ve;P.CanceledError=Ve;P.CancelToken=ru;P.isCancel=Ki;P.VERSION=so;P.toFormData=mn;P.AxiosError=v;P.Cancel=P.CanceledError;P.all=function(e){return Promise.all(e)};P.spread=su;P.isAxiosError=iu;P.mergeConfig=Ie;P.AxiosHeaders=q;P.formToJSON=t=>Xi(g.isHTMLForm(t)?new FormData(t):t);P.getAdapter=ro.getAdapter;P.HttpStatusCode=sr;P.default=P;const{Axios:kg,AxiosError:Pg,CanceledError:Lg,isCancel:Dg,CancelToken:$g,VERSION:Mg,all:Bg,Cancel:Fg,isAxiosError:Ug,spread:Hg,toFormData:jg,AxiosHeaders:qg,HttpStatusCode:Gg,formToJSON:Wg,getAdapter:zg,mergeConfig:Yg}=P,C=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,x=globalThis,ke=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,we="9.13.0";function yn(){return Sn(x),x}function Sn(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||we,e[we]=e[we]||{}}function En(t,e,n=x){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[we]=r[we]||{};return s[t]||(s[t]=e())}const ou="Sentry Logger ",ir=["debug","info","warn","error","log","assert","trace"],en={};function Je(t){if(!("console"in x))return t();const e=x.console,n={},r=Object.keys(en);r.forEach(s=>{const i=en[s];n[s]=e[s],e[s]=i});try{return t()}finally{r.forEach(s=>{e[s]=n[s]})}}function au(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return ke?ir.forEach(n=>{e[n]=(...r)=>{t&&Je(()=>{x.console[n](`${ou}[${n}]:`,...r)})}}):ir.forEach(n=>{e[n]=()=>{}}),e}const E=En("logger",au),ao=50,Re="?",bs=/\(error: (.*)\)/,Ts=/captureMessage|captureException/;function co(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const i=[],o=n.split(`
`);for(let a=r;a<o.length;a++){const c=o[a];if(c.length>1024)continue;const u=bs.test(c)?c.replace(bs,"$1"):c;if(!u.match(/\S*Error: /)){for(const l of e){const d=l(u);if(d){i.push(d);break}}if(i.length>=ao+s)break}}return uu(i.slice(s))}}function cu(t){return Array.isArray(t)?co(...t):t}function uu(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(Ot(e).function||"")&&e.pop(),e.reverse(),Ts.test(Ot(e).function||"")&&(e.pop(),Ts.test(Ot(e).function||"")&&e.pop()),e.slice(0,ao).map(n=>({...n,filename:n.filename||Ot(e).filename,function:n.function||Re}))}function Ot(t){return t[t.length-1]||{}}const Hn="<anonymous>";function me(t){try{return!t||typeof t!="function"?Hn:t.name||Hn}catch{return Hn}}function vs(t){const e=t.exception;if(e){const n=[];try{return e.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const Yt={},ws={};function Pe(t,e){Yt[t]=Yt[t]||[],Yt[t].push(e)}function Le(t,e){if(!ws[t]){ws[t]=!0;try{e()}catch(n){ke&&E.error(`Error while instrumenting ${t}`,n)}}}function J(t,e){const n=t&&Yt[t];if(n)for(const r of n)try{r(e)}catch(s){ke&&E.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${me(r)}
Error:`,s)}}let jn=null;function lu(t){const e="error";Pe(e,t),Le(e,du)}function du(){jn=x.onerror,x.onerror=function(t,e,n,r,s){return J("error",{column:r,error:s,line:n,msg:t,url:e}),jn?jn.apply(this,arguments):!1},x.onerror.__SENTRY_INSTRUMENTED__=!0}let qn=null;function fu(t){const e="unhandledrejection";Pe(e,t),Le(e,pu)}function pu(){qn=x.onunhandledrejection,x.onunhandledrejection=function(t){return J("unhandledrejection",t),qn?qn.apply(this,arguments):!0},x.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const uo=1e3;function _t(){return Date.now()/uo}function hu(){const{performance:t}=x;if(!(t!=null&&t.now))return _t;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/uo}const oe=hu(),lo=Object.prototype.toString;function Mr(t){switch(lo.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return ge(t,Error)}}function Xe(t,e){return lo.call(t)===`[object ${e}]`}function fo(t){return Xe(t,"ErrorEvent")}function Is(t){return Xe(t,"DOMError")}function mu(t){return Xe(t,"DOMException")}function ae(t){return Xe(t,"String")}function Br(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Fr(t){return t===null||Br(t)||typeof t!="object"&&typeof t!="function"}function dt(t){return Xe(t,"Object")}function bn(t){return typeof Event<"u"&&ge(t,Event)}function gu(t){return typeof Element<"u"&&ge(t,Element)}function _u(t){return Xe(t,"RegExp")}function Tn(t){return!!(t!=null&&t.then&&typeof t.then=="function")}function yu(t){return dt(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function ge(t,e){try{return t instanceof e}catch{return!1}}function po(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}function Su(t){return typeof Request<"u"&&ge(t,Request)}const Ur=x,Eu=80;function ho(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||Eu;for(;n&&i++<r&&(u=bu(n,l),!(u==="html"||i>1&&o+s.length*c+u.length>=d));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function bu(t,e){const n=t,r=[];if(!(n!=null&&n.tagName))return"";if(Ur.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=e!=null&&e.length?e.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(s!=null&&s.length)s.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&ae(o)){const a=o.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function Hr(){try{return Ur.document.location.href}catch{return""}}function Tu(t){if(!Ur.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function tn(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function Rs(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const s=t[r];try{po(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function vu(t,e,n=!1){return ae(t)?_u(e)?e.test(t):ae(e)?n?t===e:t.includes(e):!1:!1}function vn(t,e=[],n=!1){return e.some(r=>vu(t,r,n))}function G(t,e,n){if(!(e in t))return;const r=t[e];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&mo(s,r);try{t[e]=s}catch{ke&&E.log(`Failed to replace method "${e}" in object`,t)}}function Ae(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{ke&&E.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function mo(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,Ae(t,"__sentry_original__",e)}catch{}}function jr(t){return t.__sentry_original__}function go(t){if(Mr(t))return{message:t.message,name:t.name,stack:t.stack,...Cs(t)};if(bn(t)){const e={type:t.type,target:As(t.target),currentTarget:As(t.currentTarget),...Cs(t)};return typeof CustomEvent<"u"&&ge(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function As(t){try{return gu(t)?ho(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function Cs(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function wu(t,e=40){const n=Object.keys(go(t));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=e)return tn(r,e);for(let s=n.length;s>0;s--){const i=n.slice(0,s).join(", ");if(!(i.length>e))return s===n.length?i:tn(i,e)}return""}function Iu(){const t=x;return t.crypto||t.msCrypto}function z(t=Iu()){let e=()=>Math.random()*16;try{if(t!=null&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t!=null&&t.getRandomValues&&(e=()=>{const n=new Uint8Array(1);return t.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(e()&15)>>n/4).toString(16))}function _o(t){var e,n;return(n=(e=t.exception)==null?void 0:e.values)==null?void 0:n[0]}function ye(t){const{message:e,event_id:n}=t;if(e)return e;const r=_o(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function or(t,e,n){const r=t.exception=t.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=e||""),i.type||(i.type="Error")}function Ue(t,e){const n=_o(t);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...e},e&&"data"in e){const i={...s==null?void 0:s.data,...e.data};n.mechanism.data=i}}function xs(t){if(Ru(t))return!0;try{Ae(t,"__sentry_captured__",!0)}catch{}return!1}function Ru(t){try{return t.__sentry_captured__}catch{}}var ne;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(ne||(ne={}));function Ce(t){return new yt(e=>{e(t)})}function nn(t){return new yt((e,n)=>{n(t)})}let yt=class ar{constructor(e){this._state=ne.PENDING,this._handlers=[],this._runExecutor(e)}then(e,n){return new ar((r,s)=>{this._handlers.push([!1,i=>{if(!e)r(i);else try{r(e(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new ar((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,e&&e()},o=>{i=!0,s=o,e&&e()}).then(()=>{if(i){r(s);return}n(s)})})}_executeHandlers(){if(this._state===ne.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===ne.RESOLVED&&n[1](this._value),this._state===ne.REJECTED&&n[2](this._value),n[0]=!0)})}_runExecutor(e){const n=(i,o)=>{if(this._state===ne.PENDING){if(Tn(o)){o.then(r,s);return}this._state=i,this._value=o,this._executeHandlers()}},r=i=>{n(ne.RESOLVED,i)},s=i=>{n(ne.REJECTED,i)};try{e(r,s)}catch(i){s(i)}}};function Au(t){const e=oe(),n={sid:z(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>xu(n)};return t&&He(n,t),n}function He(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||oe(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:z()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Cu(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),He(t,n)}function xu(t){return{sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}function Os(){return z()}function yo(){return z().substring(16)}function St(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&Object.keys(e).length===0)return t;const r={...t};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=St(r[s],e[s],n-1));return r}const cr="_sentrySpan";function Ns(t,e){e?Ae(t,cr,e):delete t[cr]}function ks(t){return t[cr]}const Ou=100;let je=class ur{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Os(),sampleRand:Math.random()}}clone(){const e=new ur;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,Ns(e,ks(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&He(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,r=n instanceof ur?n.getScopeData():dt(n)?e:void 0,{tags:s,extra:i,user:o,contexts:a,level:c,fingerprint:u=[],propagationContext:l}=r||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),u.length&&(this._fingerprint=u),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Ns(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Os(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){var i;const r=typeof n=="number"?n:Ou;if(r<=0)return this;const s={timestamp:_t(),...e,message:e.message?tn(e.message,2048):e.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ks(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=St(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=(n==null?void 0:n.event_id)||z();if(!this._client)return E.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureMessage(e,n,r){const s=(r==null?void 0:r.event_id)||z();if(!this._client)return E.warn("No client configured on scope - will not capture message!"),s;const i=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:s},this),s}captureEvent(e,n){const r=(n==null?void 0:n.event_id)||z();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(E.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}};function Nu(){return En("defaultCurrentScope",()=>new je)}function ku(){return En("defaultIsolationScope",()=>new je)}class Pu{constructor(e,n){let r;e?r=e:r=new je;let s;n?s=n:s=new je,this._stack=[{scope:r}],this._isolationScope=s}withScope(e){const n=this._pushScope();let r;try{r=e(n)}catch(s){throw this._popScope(),s}return Tn(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function qe(){const t=yn(),e=Sn(t);return e.stack=e.stack||new Pu(Nu(),ku())}function Lu(t){return qe().withScope(t)}function Du(t,e){const n=qe();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function Ps(t){return qe().withScope(()=>t(qe().getIsolationScope()))}function $u(){return{withIsolationScope:Ps,withScope:Lu,withSetScope:Du,withSetIsolationScope:(t,e)=>Ps(e),getCurrentScope:()=>qe().getScope(),getIsolationScope:()=>qe().getIsolationScope()}}function qr(t){const e=Sn(t);return e.acs?e.acs:$u()}function ue(){const t=yn();return qr(t).getCurrentScope()}function Ke(){const t=yn();return qr(t).getIsolationScope()}function Mu(){return En("globalScope",()=>new je)}function So(...t){const e=yn(),n=qr(e);if(t.length===2){const[r,s]=t;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(t[0])}function U(){return ue().getClient()}function Bu(t){const e=t.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=e,i={trace_id:n,span_id:s||yo()};return r&&(i.parent_span_id=r),i}const Fu="sentry.source",Uu="sentry.sample_rate",Hu="sentry.op",ju="sentry.origin",Eo="sentry.profile_id",bo="sentry.exclusive_time",qu=0,Gu=1,Wu="_sentryScope",zu="_sentryIsolationScope";function To(t){return{scope:t[Wu],isolationScope:t[zu]}}function Yu(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const Vu="sentry-",Ju=/^sentry-/;function Xu(t){const e=Ku(t);if(!e)return;const n=Object.entries(e).reduce((r,[s,i])=>{if(s.match(Ju)){const o=s.slice(Vu.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function Ku(t){if(!(!t||!ae(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,n)=>{const r=Ls(n);return Object.entries(r).forEach(([s,i])=>{e[s]=i}),e},{}):Ls(t)}function Ls(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(n&&r&&(e[n]=r),e),{})}const vo=1;let Ds=!1;function Qu(t){const{spanId:e,traceId:n,isRemote:r}=t.spanContext(),s=r?e:Gr(t).parent_span_id,i=To(t).scope,o=r?(i==null?void 0:i.getPropagationContext().propagationSpanId)||yo():e;return{parent_span_id:s,span_id:o,trace_id:n}}function Zu(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:n,traceFlags:r,...s},attributes:i})=>({span_id:e,trace_id:n,sampled:r===vo,attributes:i,...s}))}function $s(t){return typeof t=="number"?Ms(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Ms(t.getTime()):oe()}function Ms(t){return t>9999999999?t/1e3:t}function Gr(t){if(tl(t))return t.getSpanJSON();const{spanId:e,traceId:n}=t.spanContext();if(el(t)){const{attributes:r,startTime:s,name:i,endTime:o,parentSpanId:a,status:c,links:u}=t;return{span_id:e,trace_id:n,data:r,description:i,parent_span_id:a,start_timestamp:$s(s),timestamp:$s(o)||void 0,status:rl(c),op:r[Hu],origin:r[ju],links:Zu(u)}}return{span_id:e,trace_id:n,start_timestamp:0,data:{}}}function el(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function tl(t){return typeof t.getSpanJSON=="function"}function nl(t){const{traceFlags:e}=t.spanContext();return e===vo}function rl(t){if(!(!t||t.code===qu))return t.code===Gu?"ok":t.message||"unknown_error"}const sl="_sentryRootSpan";function wo(t){return t[sl]||t}function Bs(){Ds||(Je(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),Ds=!0)}function il(t){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||((n=U())==null?void 0:n.getOptions());return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}const Wr="production",ol="_frozenDsc";function Io(t,e){const n=e.getOptions(),{publicKey:r}=e.getDsn()||{},s={environment:n.environment||Wr,release:n.release,public_key:r,trace_id:t};return e.emit("createDsc",s),s}function al(t,e){const n=e.getPropagationContext();return n.dsc||Io(n.traceId,t)}function cl(t){var f;const e=U();if(!e)return{};const n=wo(t),r=Gr(n),s=r.data,i=n.spanContext().traceState,o=(i==null?void 0:i.get("sentry.sample_rate"))??s[Uu];function a(m){return(typeof o=="number"||typeof o=="string")&&(m.sample_rate=`${o}`),m}const c=n[ol];if(c)return a(c);const u=i==null?void 0:i.get("sentry.dsc"),l=u&&Xu(u);if(l)return a(l);const d=Io(t.spanContext().traceId,e),p=s[Fu],h=r.description;return p!=="url"&&h&&(d.transaction=h),il()&&(d.sampled=String(nl(n)),d.sample_rand=(i==null?void 0:i.get("sentry.sample_rand"))??((f=To(n).scope)==null?void 0:f.getPropagationContext().sampleRand.toString())),a(d),e.emit("createDsc",d,n),d}const ul=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function ll(t){return t==="http"||t==="https"}function wn(t,e=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function dl(t){const e=ul.exec(t);if(!e){Je(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,s="",i="",o="",a=""]=e.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const d=u.match(/^\d+/);d&&(u=d[0])}return Ro({host:i,pass:s,path:c,projectId:u,port:o,protocol:n,publicKey:r})}function Ro(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function fl(t){if(!ke)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(o=>t[o]?!1:(E.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?ll(r)?e&&isNaN(parseInt(e,10))?(E.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(E.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(E.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function pl(t){const e=typeof t=="string"?dl(t):Ro(t);if(!(!e||!fl(e)))return e}function re(t,e=100,n=1/0){try{return lr("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Ao(t,e=3,n=100*1024){const r=re(t,e);return _l(r)>n?Ao(t,e-1,n):r}function lr(t,e,n=1/0,r=1/0,s=yl()){const[i,o]=s;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const a=hl(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(e))return"[Circular ~]";const u=e;if(u&&typeof u.toJSON=="function")try{const h=u.toJSON();return lr("",h,c-1,r,s)}catch{}const l=Array.isArray(e)?[]:{};let d=0;const p=go(e);for(const h in p){if(!Object.prototype.hasOwnProperty.call(p,h))continue;if(d>=r){l[h]="[MaxProperties ~]";break}const f=p[h];l[h]=lr(h,f,c-1,r,s),d++}return o(e),l}function hl(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(po(e))return"[VueViewModel]";if(yu(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${me(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=ml(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function ml(t){const e=Object.getPrototypeOf(t);return e!=null&&e.constructor?e.constructor.name:"null prototype"}function gl(t){return~-encodeURI(t).split(/%..|./).length}function _l(t){return gl(JSON.stringify(t))}function yl(){const t=new WeakSet;function e(r){return t.has(r)?!0:(t.add(r),!1)}function n(r){t.delete(r)}return[e,n]}function Et(t,e=[]){return[t,e]}function Sl(t,e){const[n,r]=t;return[n,[...r,e]]}function Fs(t,e){const n=t[1];for(const r of n){const s=r[0].type;if(e(r,s))return!0}return!1}function dr(t){const e=Sn(x);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function El(t){const[e,n]=t;let r=JSON.stringify(e);function s(i){typeof r=="string"?r=typeof i=="string"?r+i:[dr(r),i]:r.push(typeof i=="string"?dr(i):i)}for(const i of n){const[o,a]=i;if(s(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(re(a))}s(c)}}return typeof r=="string"?r:bl(r)}function bl(t){const e=t.reduce((s,i)=>s+i.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Tl(t){const e=typeof t.data=="string"?dr(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const vl={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",otel_log:"log_item"};function Us(t){return vl[t]}function Co(t){if(!(t!=null&&t.sdk))return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function wl(t,e,n,r){var i;const s=(i=t.sdkProcessingMetadata)==null?void 0:i.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:wn(r)},...s&&{trace:s}}}function Il(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function Rl(t,e,n,r){const s=Co(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&e&&{dsn:wn(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return Et(i,[o])}function Al(t,e,n,r){const s=Co(n),i=t.type&&t.type!=="replay_event"?t.type:"event";Il(t,n==null?void 0:n.sdk);const o=wl(t,s,r,e);return delete t.sdkProcessingMetadata,Et(o,[[{type:i},t]])}function fr(t,e,n,r=0){return new yt((s,i)=>{const o=t[r];if(e===null||typeof o!="function")s(e);else{const a=o({...e},n);C&&o.id&&a===null&&E.log(`Event processor "${o.id}" dropped event`),Tn(a)?a.then(c=>fr(t,c,n,r+1).then(s)).then(null,i):fr(t,a,n,r+1).then(s).then(null,i)}})}let Nt,Hs,kt;function Cl(t){const e=x._sentryDebugIds;if(!e)return{};const n=Object.keys(e);return kt&&n.length===Hs||(Hs=n.length,kt=n.reduce((r,s)=>{Nt||(Nt={});const i=Nt[s];if(i)r[i[0]]=i[1];else{const o=t(s);for(let a=o.length-1;a>=0;a--){const c=o[a],u=c==null?void 0:c.filename,l=e[s];if(u&&l){r[u]=l,Nt[s]=[u,l];break}}}return r},{})),kt}function xl(t,e){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=e;Ol(t,e),r&&Pl(t,r),Ll(t,n),Nl(t,s),kl(t,i)}function js(t,e){const{extra:n,tags:r,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:p,transactionName:h,span:f}=e;Pt(t,"extra",n),Pt(t,"tags",r),Pt(t,"user",s),Pt(t,"contexts",i),t.sdkProcessingMetadata=St(t.sdkProcessingMetadata,a,2),o&&(t.level=o),h&&(t.transactionName=h),f&&(t.span=f),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),u.length&&(t.fingerprint=[...t.fingerprint,...u]),l.length&&(t.eventProcessors=[...t.eventProcessors,...l]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...p}}function Pt(t,e,n){t[e]=St(t[e],n,1)}function Ol(t,e){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=e;Object.keys(n).length&&(t.extra={...n,...t.extra}),Object.keys(r).length&&(t.tags={...r,...t.tags}),Object.keys(s).length&&(t.user={...s,...t.user}),Object.keys(i).length&&(t.contexts={...i,...t.contexts}),o&&(t.level=o),a&&t.type!=="transaction"&&(t.transaction=a)}function Nl(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function kl(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function Pl(t,e){t.contexts={trace:Qu(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:cl(e),...t.sdkProcessingMetadata};const n=wo(e),r=Gr(n).description;r&&!t.transaction&&t.type==="transaction"&&(t.transaction=r)}function Ll(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}function Dl(t,e,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||n.event_id||z(),timestamp:e.timestamp||_t()},u=n.integrations||t.integrations.map(_=>_.name);$l(c,t),Fl(c,u),s&&s.emit("applyFrameMetadata",e),e.type===void 0&&Ml(c,t.stackParser);const l=Hl(r,n.captureContext);n.mechanism&&Ue(c,n.mechanism);const d=s?s.getEventProcessors():[],p=Mu().getScopeData();if(i){const _=i.getScopeData();js(p,_)}if(l){const _=l.getScopeData();js(p,_)}const h=[...n.attachments||[],...p.attachments];h.length&&(n.attachments=h),xl(c,p);const f=[...d,...p.eventProcessors];return fr(f,c,n).then(_=>(_&&Bl(_),typeof o=="number"&&o>0?Ul(_,o,a):_))}function $l(t,e){const{environment:n,release:r,dist:s,maxValueLength:i=250}=e;t.environment=t.environment||n||Wr,!t.release&&r&&(t.release=r),!t.dist&&s&&(t.dist=s);const o=t.request;o!=null&&o.url&&(o.url=tn(o.url,i))}function Ml(t,e){var r,s;const n=Cl(e);(s=(r=t.exception)==null?void 0:r.values)==null||s.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(c=>{c.filename&&(c.debug_id=n[c.filename])})})}function Bl(t){var r,s;const e={};if((s=(r=t.exception)==null?void 0:r.values)==null||s.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(c=>{c.debug_id&&(c.abs_path?e[c.abs_path]=c.debug_id:c.filename&&(e[c.filename]=c.debug_id),delete c.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.entries(e).forEach(([i,o])=>{n.push({type:"sourcemap",code_file:i,debug_id:o})})}function Fl(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function Ul(t,e,n){var s,i;if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(o=>({...o,...o.data&&{data:re(o.data,e,n)}}))},...t.user&&{user:re(t.user,e,n)},...t.contexts&&{contexts:re(t.contexts,e,n)},...t.extra&&{extra:re(t.extra,e,n)}};return(s=t.contexts)!=null&&s.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=re(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(o=>({...o,...o.data&&{data:re(o.data,e,n)}}))),(i=t.contexts)!=null&&i.flags&&r.contexts&&(r.contexts.flags=re(t.contexts.flags,3,n)),r}function Hl(t,e){if(!e)return t;const n=t?t.clone():new je;return n.update(e),n}function xo(t,e){return ue().captureException(t,void 0)}function jl(t,e){const n=typeof e=="string"?e:void 0,r=typeof e!="string"?{captureContext:e}:void 0;return ue().captureMessage(t,n,r)}function Oo(t,e){return ue().captureEvent(t,e)}function qs(t){Ke().setUser(t)}function Gs(t){const e=Ke(),n=ue(),{userAgent:r}=x.navigator||{},s=Au({user:n.getUser()||e.getUser(),...r&&{userAgent:r},...t}),i=e.getSession();return(i==null?void 0:i.status)==="ok"&&He(i,{status:"exited"}),No(),e.setSession(s),s}function No(){const t=Ke(),n=ue().getSession()||t.getSession();n&&Cu(n),ko(),t.setSession()}function ko(){const t=Ke(),e=U(),n=t.getSession();n&&e&&e.captureSession(n)}function Ws(t=!1){if(t){No();return}ko()}const ql="7";function Gl(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function Wl(t){return`${Gl(t)}${t.projectId}/envelope/`}function zl(t,e){const n={sentry_version:ql};return t.publicKey&&(n.sentry_key=t.publicKey),e&&(n.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(n).toString()}function Yl(t,e,n){return e||`${Wl(t)}?${zl(t,n)}`}const zs=[];function Vl(t){const e={};return t.forEach(n=>{const{name:r}=n,s=e[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.values(e)}function Jl(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(s=>{s.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...e,...n];else if(typeof n=="function"){const s=n(e);r=Array.isArray(s)?s:[s]}else r=e;return Vl(r)}function Xl(t,e){const n={};return e.forEach(r=>{r&&Po(t,r,n)}),n}function Ys(t,e){for(const n of e)n!=null&&n.afterAllSetup&&n.afterAllSetup(t)}function Po(t,e,n){if(n[e.name]){C&&E.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,zs.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),zs.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(s,i)=>r(s,i,t))}if(typeof e.processEvent=="function"){const r=e.processEvent.bind(e),s=Object.assign((i,o)=>r(i,o,t),{id:e.name});t.addEventProcessor(s)}C&&E.log(`Integration installed: ${e.name}`)}function Kl(t,e,n){const r=[{type:"client_report"},{timestamp:_t(),discarded_events:t}];return Et(e?{dsn:e}:{},[r])}function Lo(t){const e=[];t.message&&e.push(t.message);try{const n=t.exception.values[t.exception.values.length-1];n!=null&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`))}catch{}return e}function Ql(t){var c;const{trace_id:e,parent_span_id:n,span_id:r,status:s,origin:i,data:o,op:a}=((c=t.contexts)==null?void 0:c.trace)??{};return{data:o??{},description:t.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:t.start_timestamp??0,status:s,timestamp:t.timestamp,trace_id:e??"",origin:i,profile_id:o==null?void 0:o[Eo],exclusive_time:o==null?void 0:o[bo],measurements:t.measurements,is_segment:!0}}function Zl(t){return{type:"transaction",timestamp:t.timestamp,start_timestamp:t.start_timestamp,transaction:t.description,contexts:{trace:{trace_id:t.trace_id,span_id:t.span_id,parent_span_id:t.parent_span_id,op:t.op,status:t.status,origin:t.origin,data:{...t.data,...t.profile_id&&{[Eo]:t.profile_id},...t.exclusive_time&&{[bo]:t.exclusive_time}}}},measurements:t.measurements}}const Vs="Not capturing exception because it's already been captured.",Js="Discarded session because of missing or non-string release",Do=Symbol.for("SentryInternalError"),$o=Symbol.for("SentryDoNotSendEventError");function Vt(t){return{message:t,[Do]:!0}}function Gn(t){return{message:t,[$o]:!0}}function Xs(t){return!!t&&typeof t=="object"&&Do in t}function Ks(t){return!!t&&typeof t=="object"&&$o in t}class ed{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=pl(e.dsn):C&&E.warn("No DSN provided, client will not send events."),this._dsn){const n=Yl(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}}captureException(e,n,r){const s=z();if(xs(e))return C&&E.log(Vs),s;const i={event_id:s,...n};return this._process(this.eventFromException(e,i).then(o=>this._captureEvent(o,i,r))),i.event_id}captureMessage(e,n,r,s){const i={event_id:z(),...r},o=Br(e)?e:String(e),a=Fr(e)?this.eventFromMessage(o,n,i):this.eventFromException(e,i);return this._process(a.then(c=>this._captureEvent(c,i,s))),i.event_id}captureEvent(e,n,r){const s=z();if(n!=null&&n.originalException&&xs(n.originalException))return C&&E.log(Vs),s;const i={event_id:s,...n},o=e.sdkProcessingMetadata||{},a=o.capturedSpanScope,c=o.capturedSpanIsolationScope;return this._process(this._captureEvent(e,i,a||r,c)),i.event_id}captureSession(e){this.sendSession(e),He(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(s=>r&&s))):Ce(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const n=this._integrations[e.name];Po(this,e,this._integrations),n||Ys(this,[e])}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=Al(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=Sl(r,Tl(i));const s=this.sendEnvelope(r);s&&s.then(i=>this.emit("afterSendEvent",e,i),null)}sendSession(e){const{release:n,environment:r=Wr}=this._options;if("aggregates"in e){const i=e.attrs||{};if(!i.release&&!n){C&&E.warn(Js);return}i.release=i.release||n,i.environment=i.environment||r,e.attrs=i}else{if(!e.release&&!n){C&&E.warn(Js);return}e.release=e.release||n,e.environment=e.environment||r}this.emit("beforeSendSession",e);const s=Rl(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(e,n,r=1){if(this._options.sendClientReports){const s=`${e}:${n}`;C&&E.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(e,n){const r=this._hooks[e]=this._hooks[e]||[];return r.push(n),()=>{const s=r.indexOf(n);s>-1&&r.splice(s,1)}}emit(e,...n){const r=this._hooks[e];r&&r.forEach(s=>s(...n))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,n=>(C&&E.error("Error while sending envelope:",n),n)):(C&&E.error("Transport disabled"),Ce({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=Xl(this,e),Ys(this,e)}_updateSessionFromEvent(e,n){var c;let r=n.level==="fatal",s=!1;const i=(c=n.exception)==null?void 0:c.values;if(i){s=!0;for(const u of i){const l=u.mechanism;if((l==null?void 0:l.handled)===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(He(e,{...r&&{status:"crashed"},errors:e.errors||Number(s||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new yt(n=>{let r=0;const s=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=s,e&&r>=e&&(clearInterval(i),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,s){const i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&(o!=null&&o.length)&&(n.integrations=o),this.emit("preprocessEvent",e,n),e.type||s.setLastEventId(e.event_id||n.event_id),Dl(i,e,n,r,this,s).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:Bu(r),...a.contexts};const c=al(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(e,n={},r=ue(),s=Ke()){return C&&pr(e)&&E.log(`Captured error event \`${Lo(e)[0]||"<unknown>"}\``),this._processEvent(e,n,r,s).then(i=>i.event_id,i=>{C&&(Ks(i)?E.log(i.message):Xs(i)?E.warn(i.message):E.warn(i))})}_processEvent(e,n,r,s){const i=this.getOptions(),{sampleRate:o}=i,a=Mo(e),c=pr(e),u=e.type||"error",l=`before send for type \`${u}\``,d=typeof o>"u"?void 0:Yu(o);if(c&&typeof d=="number"&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),nn(Gn(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const p=u==="replay_event"?"replay":u;return this._prepareEvent(e,n,r,s).then(h=>{if(h===null)throw this.recordDroppedEvent("event_processor",p),Gn("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return h;const m=nd(this,i,h,n);return td(m,l)}).then(h=>{var _;if(h===null){if(this.recordDroppedEvent("before_send",p),a){const T=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",T)}throw Gn(`${l} returned \`null\`, will not send event.`)}const f=r.getSession()||s.getSession();if(c&&f&&this._updateSessionFromEvent(f,h),a){const S=((_=h.sdkProcessingMetadata)==null?void 0:_.spanCountBeforeProcessing)||0,T=h.spans?h.spans.length:0,I=S-T;I>0&&this.recordDroppedEvent("before_send","span",I)}const m=h.transaction_info;if(a&&m&&h.transaction!==e.transaction){const S="custom";h.transaction_info={...m,source:S}}return this.sendEvent(h,n),h}).then(null,h=>{throw Ks(h)||Xs(h)?h:(this.captureException(h,{data:{__sentry__:!0},originalException:h}),Vt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${h}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([n,r])=>{const[s,i]=n.split(":");return{reason:s,category:i,quantity:r}})}_flushOutcomes(){C&&E.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){C&&E.log("No outcomes to send");return}if(!this._dsn){C&&E.log("No dsn provided, will not send outcomes");return}C&&E.log("Sending outcomes:",e);const n=Kl(e,this._options.tunnel&&wn(this._dsn));this.sendEnvelope(n)}}function td(t,e){const n=`${e} must return \`null\` or a valid event.`;if(Tn(t))return t.then(r=>{if(!dt(r)&&r!==null)throw Vt(n);return r},r=>{throw Vt(`${e} rejected with ${r}`)});if(!dt(t)&&t!==null)throw Vt(n);return t}function nd(t,e,n,r){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:o}=e;let a=n;if(pr(a)&&s)return s(a,r);if(Mo(a)){if(o){const c=o(Ql(a));if(c?a=St(n,Zl(c)):Bs(),a.spans){const u=[];for(const l of a.spans){const d=o(l);d?u.push(d):(Bs(),u.push(l))}a.spans=u}}if(i){if(a.spans){const c=a.spans.length;a.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:c}}return i(a,r)}}return a}function pr(t){return t.type===void 0}function Mo(t){return t.type==="transaction"}function rd(t){return[{type:"otel_log"},t]}function sd(t,e,n,r){const s={};return e!=null&&e.sdk&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),n&&r&&(s.dsn=wn(r)),Et(s,t.map(rd))}const id=new WeakMap;function Wn(t,e){const n=id.get(t)??[];if(n.length===0)return;const r=t.getOptions(),s=sd(n,r._metadata,r.tunnel,t.getDsn());n.length=0,t.emit("flushLogs"),t.sendEnvelope(s)}function od(t,e){e.debug===!0&&(C?E.enable():Je(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),ue().update(e.initialScope);const r=new t(e);return ad(r),r.init(),r}function ad(t){ue().setClient(t)}const Bo=Symbol.for("SentryBufferFullError");function cd(t){const e=[];function n(){return t===void 0||e.length<t}function r(o){return e.splice(e.indexOf(o),1)[0]||Promise.resolve(void 0)}function s(o){if(!n())return nn(Bo);const a=o();return e.indexOf(a)===-1&&e.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(o){return new yt((a,c)=>{let u=e.length;if(!u)return a(!0);const l=setTimeout(()=>{o&&o>0&&a(!1)},o);e.forEach(d=>{Ce(d).then(()=>{--u||(clearTimeout(l),a(!0))},c)})})}return{$:e,add:s,drain:i}}const ud=60*1e3;function ld(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?ud:r-e}function dd(t,e){return t[e]||t.all||0}function fd(t,e,n=Date.now()){return dd(t,e)>n}function pd(t,{statusCode:e,headers:n},r=Date.now()){const s={...t},i=n==null?void 0:n["x-sentry-rate-limits"],o=n==null?void 0:n["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,u,,,l]=a.split(":",5),d=parseInt(c,10),p=(isNaN(d)?60:d)*1e3;if(!u)s.all=r+p;else for(const h of u.split(";"))h==="metric_bucket"?(!l||l.split(";").includes("custom"))&&(s[h]=r+p):s[h]=r+p}else o?s.all=r+ld(o,r):e===429&&(s.all=r+60*1e3);return s}const hd=64;function md(t,e,n=cd(t.bufferSize||hd)){let r={};const s=o=>n.drain(o);function i(o){const a=[];if(Fs(o,(d,p)=>{const h=Us(p);fd(r,h)?t.recordDroppedEvent("ratelimit_backoff",h):a.push(d)}),a.length===0)return Ce({});const c=Et(o[0],a),u=d=>{Fs(c,(p,h)=>{t.recordDroppedEvent(d,Us(h))})},l=()=>e({body:El(c)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&C&&E.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=pd(r,d),d),d=>{throw u("network_error"),C&&E.error("Encountered error running transport request:",d),d});return n.add(l).then(d=>d,d=>{if(d===Bo)return C&&E.error("Skipped sending event because buffer is full."),u("queue_overflow"),Ce({});throw d})}return{send:i,flush:s}}function gd(t){var e;((e=t.user)==null?void 0:e.ip_address)===void 0&&(t.user={...t.user,ip_address:"{{auto}}"})}function _d(t){var e;"aggregates"in t?((e=t.attrs)==null?void 0:e.ip_address)===void 0&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):t.ipAddress===void 0&&(t.ipAddress="{{auto}}")}function yd(t,e,n=[e],r="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:we})),version:we}),t._metadata=s}const Sd=100;function xe(t,e){const n=U(),r=Ke();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=Sd}=n.getOptions();if(i<=0)return;const a={timestamp:_t(),...t},c=s?Je(()=>s(a,e)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,e),r.addBreadcrumb(c,i))}let Qs;const Ed="FunctionToString",Zs=new WeakMap,bd=()=>({name:Ed,setupOnce(){Qs=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=jr(this),n=Zs.has(U())&&e!==void 0?e:this;return Qs.apply(n,t)}}catch{}},setup(t){Zs.set(t,!0)}}),Td=bd,vd=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],wd="EventFilters",Id=(t={})=>{let e;return{name:wd,setup(n){const r=n.getOptions();e=ei(t,r)},processEvent(n,r,s){if(!e){const i=s.getOptions();e=ei(t,i)}return Ad(n,e)?null:n}}},Rd=(t={})=>({...Id(t),name:"InboundFilters"});function ei(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:vd],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function Ad(t,e){if(t.type){if(t.type==="transaction"&&xd(t,e.ignoreTransactions))return C&&E.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${ye(t)}`),!0}else{if(Cd(t,e.ignoreErrors))return C&&E.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${ye(t)}`),!0;if(Pd(t))return C&&E.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${ye(t)}`),!0;if(Od(t,e.denyUrls))return C&&E.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${ye(t)}.
Url: ${rn(t)}`),!0;if(!Nd(t,e.allowUrls))return C&&E.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${ye(t)}.
Url: ${rn(t)}`),!0}return!1}function Cd(t,e){return e!=null&&e.length?Lo(t).some(n=>vn(n,e)):!1}function xd(t,e){if(!(e!=null&&e.length))return!1;const n=t.transaction;return n?vn(n,e):!1}function Od(t,e){if(!(e!=null&&e.length))return!1;const n=rn(t);return n?vn(n,e):!1}function Nd(t,e){if(!(e!=null&&e.length))return!0;const n=rn(t);return n?vn(n,e):!0}function kd(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function rn(t){var e,n;try{const r=[...((e=t.exception)==null?void 0:e.values)??[]].reverse().find(i=>{var o,a,c;return((o=i.mechanism)==null?void 0:o.parent_id)===void 0&&((c=(a=i.stacktrace)==null?void 0:a.frames)==null?void 0:c.length)}),s=(n=r==null?void 0:r.stacktrace)==null?void 0:n.frames;return s?kd(s):null}catch{return C&&E.error(`Cannot extract url for event ${ye(t)}`),null}}function Pd(t){var e,n;return(n=(e=t.exception)==null?void 0:e.values)!=null&&n.length?!t.message&&!t.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value):!1}function Ld(t,e,n,r,s,i){var a;if(!((a=s.exception)!=null&&a.values)||!i||!ge(i.originalException,Error))return;const o=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;o&&(s.exception.values=hr(t,e,r,i.originalException,n,s.exception.values,o,0))}function hr(t,e,n,r,s,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(ge(r[s],Error)){ti(o,a);const u=t(e,r[s]),l=c.length;ni(u,s,l,a),c=hr(t,e,n,r[s],s,[u,...c],u,l)}return Array.isArray(r.errors)&&r.errors.forEach((u,l)=>{if(ge(u,Error)){ti(o,a);const d=t(e,u),p=c.length;ni(d,`errors[${l}]`,p,a),c=hr(t,e,n,u,s,[d,...c],d,p)}}),c}function ti(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function ni(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function Dd(t){const e="console";Pe(e,t),Le(e,$d)}function $d(){"console"in x&&ir.forEach(function(t){t in x.console&&G(x.console,t,function(e){return en[t]=e,function(...n){J("console",{args:n,level:t});const s=en[t];s==null||s.apply(x.console,n)}})})}function Md(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const Bd="Dedupe",Fd=()=>{let t;return{name:Bd,processEvent(e){if(e.type)return e;try{if(Hd(e,t))return C&&E.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}},Ud=Fd;function Hd(t,e){return e?!!(jd(t,e)||qd(t,e)):!1}function jd(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Uo(t,e)||!Fo(t,e))}function qd(t,e){const n=ri(e),r=ri(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Uo(t,e)||!Fo(t,e))}function Fo(t,e){let n=vs(t),r=vs(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function Uo(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function ri(t){var e;return((e=t.exception)==null?void 0:e.values)&&t.exception.values[0]}function zn(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function Ho(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const ft=x;function Gd(){return"history"in ft&&!!ft.history}function jo(){if(!("fetch"in ft))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function mr(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Wd(){var n;if(typeof EdgeRuntime=="string")return!0;if(!jo())return!1;if(mr(ft.fetch))return!0;let t=!1;const e=ft.document;if(e&&typeof e.createElement=="function")try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r),(n=r.contentWindow)!=null&&n.fetch&&(t=mr(r.contentWindow.fetch)),e.head.removeChild(r)}catch(r){ke&&E.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return t}function zd(t,e){const n="fetch";Pe(n,t),Le(n,()=>Yd(void 0,e))}function Yd(t,e=!1){e&&!Wd()||G(x,"fetch",function(n){return function(...r){const s=new Error,{method:i,url:o}=Vd(r),a={args:r,fetchData:{method:i,url:o},startTimestamp:oe()*1e3,virtualError:s,headers:Jd(r)};return J("fetch",{...a}),n.apply(x,r).then(async c=>(J("fetch",{...a,endTimestamp:oe()*1e3,response:c}),c),c=>{if(J("fetch",{...a,endTimestamp:oe()*1e3,error:c}),Mr(c)&&c.stack===void 0&&(c.stack=s.stack,Ae(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const u=new URL(a.fetchData.url);c.message=`${c.message} (${u.host})`}catch{}throw c})}})}function gr(t,e){return!!t&&typeof t=="object"&&!!t[e]}function si(t){return typeof t=="string"?t:t?gr(t,"url")?t.url:t.toString?t.toString():"":""}function Vd(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:si(n),method:gr(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:si(e),method:gr(e,"method")?String(e.method).toUpperCase():"GET"}}function Jd(t){const[e,n]=t;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(Su(e))return new Headers(e.headers)}catch{}}function Xd(){return"npm"}const k=x;let _r=0;function qo(){return _r>0}function Kd(){_r++,setTimeout(()=>{_r--})}function Ge(t,e={}){function n(s){return typeof s=="function"}if(!n(t))return t;try{const s=t.__sentry_wrapped__;if(s)return typeof s=="function"?s:t;if(jr(t))return t}catch{return t}const r=function(...s){try{const i=s.map(o=>Ge(o,e));return t.apply(this,i)}catch(i){throw Kd(),So(o=>{o.addEventProcessor(a=>(e.mechanism&&(or(a,void 0),Ue(a,e.mechanism)),a.extra={...a.extra,arguments:s},a)),xo(i)}),i}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}catch{}mo(r,t),Ae(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}function zr(t,e){const n=Yr(t,e),r={type:nf(e),value:rf(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Qd(t,e,n,r){const s=U(),i=s==null?void 0:s.getOptions().normalizeDepth,o=uf(e),a={__serialized__:Ao(e,i)};if(o)return{exception:{values:[zr(t,o)]},extra:a};const c={exception:{values:[{type:bn(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:af(e,{isUnhandledRejection:r})}]},extra:a};if(n){const u=Yr(t,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function Yn(t,e){return{exception:{values:[zr(t,e)]}}}function Yr(t,e){const n=e.stacktrace||e.stack||"",r=ef(e),s=tf(e);try{return t(n,r,s)}catch{}return[]}const Zd=/Minified React error #\d+;/i;function ef(t){return t&&Zd.test(t.message)?1:0}function tf(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function Go(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function nf(t){const e=t==null?void 0:t.name;return!e&&Go(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function rf(t){const e=t==null?void 0:t.message;return Go(t)?Array.isArray(t.message)&&t.message.length==2?t.message[1]:"wasm exception":e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function sf(t,e,n,r){const s=(n==null?void 0:n.syntheticException)||void 0,i=Vr(t,e,s,r);return Ue(i),i.level="error",n!=null&&n.event_id&&(i.event_id=n.event_id),Ce(i)}function of(t,e,n="info",r,s){const i=(r==null?void 0:r.syntheticException)||void 0,o=yr(t,e,i,s);return o.level=n,r!=null&&r.event_id&&(o.event_id=r.event_id),Ce(o)}function Vr(t,e,n,r,s){let i;if(fo(e)&&e.error)return Yn(t,e.error);if(Is(e)||mu(e)){const o=e;if("stack"in e)i=Yn(t,e);else{const a=o.name||(Is(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;i=yr(t,c,n,r),or(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return Mr(e)?Yn(t,e):dt(e)||bn(e)?(i=Qd(t,e,n,s),Ue(i,{synthetic:!0}),i):(i=yr(t,e,n,r),or(i,`${e}`),Ue(i,{synthetic:!0}),i)}function yr(t,e,n,r){const s={};if(r&&n){const i=Yr(t,n);i.length&&(s.exception={values:[{value:e,stacktrace:{frames:i}}]}),Ue(s,{synthetic:!0})}if(Br(e)){const{__sentry_template_string__:i,__sentry_template_values__:o}=e;return s.logentry={message:i,params:o},s}return s.message=e,s}function af(t,{isUnhandledRejection:e}){const n=wu(t),r=e?"promise rejection":"exception";return fo(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:bn(t)?`Event \`${cf(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function cf(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function uf(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];if(n instanceof Error)return n}}const lf=5e3;class df extends ed{constructor(e){const n={parentSpanIsAlwaysRootSpan:!0,...e},r=k.SENTRY_SDK_SOURCE||Xd();yd(n,"browser",["browser"],r),super(n);const s=this,{sendDefaultPii:i,_experiments:o}=s._options,a=o==null?void 0:o.enableLogs;n.sendClientReports&&k.document&&k.document.addEventListener("visibilitychange",()=>{k.document.visibilityState==="hidden"&&(this._flushOutcomes(),a&&Wn(s))}),a&&(s.on("flush",()=>{Wn(s)}),s.on("afterCaptureLog",()=>{s._logFlushIdleTimeout&&clearTimeout(s._logFlushIdleTimeout),s._logFlushIdleTimeout=setTimeout(()=>{Wn(s)},lf)})),i&&(s.on("postprocessEvent",gd),s.on("beforeSendSession",_d))}eventFromException(e,n){return sf(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return of(this._options.stackParser,e,n,r,this._options.attachStacktrace)}_prepareEvent(e,n,r,s){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r,s)}}const ff=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,j=x,pf=1e3;let ii,Sr,Er;function hf(t){const e="dom";Pe(e,t),Le(e,mf)}function mf(){if(!j.document)return;const t=J.bind(null,"dom"),e=oi(t,!0);j.document.addEventListener("click",e,!1),j.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{var i,o;const s=(i=j[n])==null?void 0:i.prototype;(o=s==null?void 0:s.hasOwnProperty)!=null&&o.call(s,"addEventListener")&&(G(s,"addEventListener",function(a){return function(c,u,l){if(c==="click"||c=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},p=d[c]=d[c]||{refCount:0};if(!p.handler){const h=oi(t);p.handler=h,a.call(this,c,h,l)}p.refCount++}catch{}return a.call(this,c,u,l)}}),G(s,"removeEventListener",function(a){return function(c,u,l){if(c==="click"||c=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},p=d[c];p&&(p.refCount--,p.refCount<=0&&(a.call(this,c,p.handler,l),p.handler=void 0,delete d[c]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,c,u,l)}}))})}function gf(t){if(t.type!==Sr)return!1;try{if(!t.target||t.target._sentryId!==Er)return!1}catch{}return!0}function _f(t,e){return t!=="keypress"?!1:e!=null&&e.tagName?!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable):!0}function oi(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=yf(n);if(_f(n.type,r))return;Ae(n,"_sentryCaptured",!0),r&&!r._sentryId&&Ae(r,"_sentryId",z());const s=n.type==="keypress"?"input":n.type;gf(n)||(t({event:n,name:s,global:e}),Sr=n.type,Er=r?r._sentryId:void 0),clearTimeout(ii),ii=j.setTimeout(()=>{Er=void 0,Sr=void 0},pf)}}function yf(t){try{return t.target}catch{return null}}let Lt;function Wo(t){const e="history";Pe(e,t),Le(e,Sf)}function Sf(){if(j.addEventListener("popstate",()=>{const e=j.location.href,n=Lt;if(Lt=e,n===e)return;J("history",{from:n,to:e})}),!Gd())return;function t(e){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const s=Lt,i=String(r);if(Lt=i,s===i)return e.apply(this,n);J("history",{from:s,to:i})}return e.apply(this,n)}}G(j.history,"pushState",t),G(j.history,"replaceState",t)}const Jt={};function Ef(t){const e=Jt[t];if(e)return e;let n=j[t];if(mr(n))return Jt[t]=n.bind(j);const r=j.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const i=s.contentWindow;i!=null&&i[t]&&(n=i[t]),r.head.removeChild(s)}catch(s){ff&&E.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,s)}return n&&(Jt[t]=n.bind(j))}function ai(t){Jt[t]=void 0}const it="__sentry_xhr_v3__";function bf(t){const e="xhr";Pe(e,t),Le(e,Tf)}function Tf(){if(!j.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,n,r){const s=new Error,i=oe()*1e3,o=ae(r[0])?r[0].toUpperCase():void 0,a=vf(r[1]);if(!o||!a)return e.apply(n,r);n[it]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const u=n[it];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}const l={endTimestamp:oe()*1e3,startTimestamp:i,xhr:n,virtualError:s};J("xhr",l)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,l,d){return c(),u.apply(l,d)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,l,d){const[p,h]=d,f=l[it];return f&&ae(p)&&ae(h)&&(f.request_headers[p.toLowerCase()]=h),u.apply(l,d)}}),e.apply(n,r)}}),t.send=new Proxy(t.send,{apply(e,n,r){const s=n[it];if(!s)return e.apply(n,r);r[0]!==void 0&&(s.body=r[0]);const i={startTimestamp:oe()*1e3,xhr:n};return J("xhr",i),e.apply(n,r)}})}function vf(t){if(ae(t))return t;try{return t.toString()}catch{}}function wf(t,e=Ef("fetch")){let n=0,r=0;function s(i){const o=i.body.length;n+=o,r++;const a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};if(!e)return ai("fetch"),nn("No fetch implementation available");try{return e(t.url,a).then(c=>(n-=o,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return ai("fetch"),n-=o,r--,nn(c)}}return md(t,s)}const If=30,Rf=50;function br(t,e,n,r){const s={filename:t,function:e==="<anonymous>"?Re:e,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const Af=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Cf=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,xf=/\((\S*)(?::(\d+))(?::(\d+))\)/,Of=t=>{const e=Af.exec(t);if(e){const[,r,s,i]=e;return br(r,Re,+s,+i)}const n=Cf.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const o=xf.exec(n[2]);o&&(n[2]=o[1],n[3]=o[2],n[4]=o[3])}const[s,i]=zo(n[1]||Re,n[2]);return br(i,s,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},Nf=[If,Of],kf=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Pf=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Lf=t=>{const e=kf.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=Pf.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let r=e[3],s=e[1]||Re;return[s,r]=zo(s,r),br(r,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},Df=[Rf,Lf],$f=[Nf,Df],Mf=co(...$f),zo=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:Re,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},pt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Dt=1024,Bf="Breadcrumbs",Ff=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:Bf,setup(n){e.console&&Dd(qf(n)),e.dom&&hf(jf(n,e.dom)),e.xhr&&bf(Gf(n)),e.fetch&&zd(Wf(n)),e.history&&Wo(zf(n)),e.sentry&&n.on("beforeSendEvent",Hf(n))}}},Uf=Ff;function Hf(t){return function(n){U()===t&&xe({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:ye(n)},{event:n})}}function jf(t,e){return function(r){if(U()!==t)return;let s,i,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>Dt&&(pt&&E.warn(`\`dom.maxStringLength\` cannot exceed ${Dt}, but a value of ${a} was configured. Sentry will use ${Dt} instead.`),a=Dt),typeof o=="string"&&(o=[o]);try{const u=r.event,l=Yf(u)?u.target:u;s=ho(l,{keyAttrs:o,maxStringLength:a}),i=Tu(l)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};i&&(c.data={"ui.component_name":i}),xe(c,{event:r.event,name:r.name,global:r.global})}}function qf(t){return function(n){if(U()!==t)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:Md(n.level),message:Rs(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${Rs(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;xe(r,{input:n.args,level:n.level})}}function Gf(t){return function(n){if(U()!==t)return;const{startTimestamp:r,endTimestamp:s}=n,i=n.xhr[it];if(!r||!s||!i)return;const{method:o,url:a,status_code:c,body:u}=i,l={method:o,url:a,status_code:c},d={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:s},p={category:"xhr",data:l,type:"http",level:Ho(c)};t.emit("beforeOutgoingRequestBreadcrumb",p,d),xe(p,d)}}function Wf(t){return function(n){if(U()!==t)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const i=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s},a={category:"fetch",data:i,level:"error",type:"http"};t.emit("beforeOutgoingRequestBreadcrumb",a,o),xe(a,o)}else{const i=n.response,o={...n.fetchData,status_code:i==null?void 0:i.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i==null||i.status;const a={input:n.args,response:i,startTimestamp:r,endTimestamp:s},c={category:"fetch",data:o,type:"http",level:Ho(o.status_code)};t.emit("beforeOutgoingRequestBreadcrumb",c,a),xe(c,a)}}}function zf(t){return function(n){if(U()!==t)return;let r=n.from,s=n.to;const i=zn(k.location.href);let o=r?zn(r):void 0;const a=zn(s);o!=null&&o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(s=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),xe({category:"navigation",data:{from:r,to:s}})}}function Yf(t){return!!t&&!!t.target}const Vf=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Jf="BrowserApiErrors",Xf=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:Jf,setupOnce(){e.setTimeout&&G(k,"setTimeout",ci),e.setInterval&&G(k,"setInterval",ci),e.requestAnimationFrame&&G(k,"requestAnimationFrame",Qf),e.XMLHttpRequest&&"XMLHttpRequest"in k&&G(XMLHttpRequest.prototype,"send",Zf);const n=e.eventTarget;n&&(Array.isArray(n)?n:Vf).forEach(ep)}}},Kf=Xf;function ci(t){return function(...e){const n=e[0];return e[0]=Ge(n,{mechanism:{data:{function:me(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function Qf(t){return function(e){return t.apply(this,[Ge(e,{mechanism:{data:{function:"requestAnimationFrame",handler:me(t)},handled:!1,type:"instrument"}})])}}function Zf(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&G(n,s,function(i){const o={mechanism:{data:{function:s,handler:me(i)},handled:!1,type:"instrument"}},a=jr(i);return a&&(o.mechanism.data.handler=me(a)),Ge(i,o)})}),t.apply(this,e)}}function ep(t){var r,s;const n=(r=k[t])==null?void 0:r.prototype;(s=n==null?void 0:n.hasOwnProperty)!=null&&s.call(n,"addEventListener")&&(G(n,"addEventListener",function(i){return function(o,a,c){try{tp(a)&&(a.handleEvent=Ge(a.handleEvent,{mechanism:{data:{function:"handleEvent",handler:me(a),target:t},handled:!1,type:"instrument"}}))}catch{}return i.apply(this,[o,Ge(a,{mechanism:{data:{function:"addEventListener",handler:me(a),target:t},handled:!1,type:"instrument"}}),c])}}),G(n,"removeEventListener",function(i){return function(o,a,c){try{const u=a.__sentry_wrapped__;u&&i.call(this,o,u,c)}catch{}return i.call(this,o,a,c)}}))}function tp(t){return typeof t.handleEvent=="function"}const np=()=>({name:"BrowserSession",setupOnce(){if(typeof k.document>"u"){pt&&E.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Gs({ignoreDuration:!0}),Ws(),Wo(({from:t,to:e})=>{t!==void 0&&t!==e&&(Gs({ignoreDuration:!0}),Ws())})}}),rp="GlobalHandlers",sp=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:rp,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(op(n),ui("onerror")),e.onunhandledrejection&&(ap(n),ui("onunhandledrejection"))}}},ip=sp;function op(t){lu(e=>{const{stackParser:n,attachStacktrace:r}=Yo();if(U()!==t||qo())return;const{msg:s,url:i,line:o,column:a,error:c}=e,u=lp(Vr(n,c||s,void 0,r,!1),i,o,a);u.level="error",Oo(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function ap(t){fu(e=>{const{stackParser:n,attachStacktrace:r}=Yo();if(U()!==t||qo())return;const s=cp(e),i=Fr(s)?up(s):Vr(n,s,void 0,r,!0);i.level="error",Oo(i,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function cp(t){if(Fr(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function up(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function lp(t,e,n,r){const s=t.exception=t.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=r,l=n,d=ae(e)&&e.length>0?e:Hr();return c.length===0&&c.push({colno:u,filename:d,function:Re,in_app:!0,lineno:l}),t}function ui(t){pt&&E.log(`Global Handler attached: ${t}`)}function Yo(){const t=U();return(t==null?void 0:t.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const dp=()=>({name:"HttpContext",preprocessEvent(t){var o,a;if(!k.navigator&&!k.location&&!k.document)return;const e=((o=t.request)==null?void 0:o.url)||Hr(),{referrer:n}=k.document||{},{userAgent:r}=k.navigator||{},s={...(a=t.request)==null?void 0:a.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...t.request,...e&&{url:e},headers:s};t.request=i}}),fp="cause",pp=5,hp="LinkedErrors",mp=(t={})=>{const e=t.limit||pp,n=t.key||fp;return{name:hp,preprocessEvent(r,s,i){const o=i.getOptions();Ld(zr,o.stackParser,n,e,r,s)}}},gp=mp;function _p(t){return[Rd(),Td(),Kf(),Uf(),ip(),gp(),Ud(),dp(),np()]}function yp(t={}){var n;return{...{defaultIntegrations:_p(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(n=k.SENTRY_RELEASE)==null?void 0:n.id,sendClientReports:!0},...Sp(t)}}function Sp(t){const e={};for(const n of Object.getOwnPropertyNames(t)){const r=n;t[r]!==void 0&&(e[r]=t[r])}return e}function Ep(){var c;const t=typeof k.window<"u"&&k;if(!t)return!1;const e=t.chrome?"chrome":"browser",n=t[e],r=(c=n==null?void 0:n.runtime)==null?void 0:c.id,s=Hr()||"",i=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],o=!!r&&k===k.top&&i.some(u=>s.startsWith(`${u}//`)),a=typeof t.nw<"u";return!!r&&!o&&!a}function bp(t={}){const e=yp(t);if(!e.skipBrowserExtensionCheck&&Ep()){pt&&Je(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}pt&&!jo()&&E.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.");const n={...e,stackParser:cu(e.stackParser||Mf),integrations:Jl(e),transport:e.transport||wf};return od(df,n)}const Tp=Object.prototype.toString;function Jr(t,e){return Tp.call(t)===`[object ${e}]`}function pe(t){return Jr(t,"String")}function Vo(t){return Jr(t,"Object")}function Jo(t){return Jr(t,"RegExp")}function _e(t){return!!(t&&t.then&&typeof t.then=="function")}function vp(t){return typeof t=="number"&&t!==t}function li(t,e){try{return t instanceof e}catch{return!1}}function wp(t,e,n=!1){return pe(t)?Jo(e)?e.test(t):pe(e)?n?t===e:t.includes(e):!1:!1}function Ip(t,e=[],n=!1){return e.some(r=>wp(t,r,n))}function $t(t){return t&&t.Math==Math?t:void 0}const O=typeof globalThis=="object"&&$t(globalThis)||typeof window=="object"&&$t(window)||typeof self=="object"&&$t(self)||typeof global=="object"&&$t(global)||function(){return this}()||{};function Xr(){return O}function Xo(t,e,n){const r=n||O,s=r.__SENTRY__=r.__SENTRY__||{};return s[t]||(s[t]=e())}const at=Xr(),Rp=80;function sn(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const l=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||Rp;for(;n&&i++<r&&(u=Ap(n,l),!(u==="html"||i>1&&o+s.length*c+u.length>=d));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function Ap(t,e){const n=t,r=[];let s,i,o,a,c;if(!n||!n.tagName)return"";if(at.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const u=e&&e.length?e.filter(d=>n.getAttribute(d)).map(d=>[d,n.getAttribute(d)]):null;if(u&&u.length)u.forEach(d=>{r.push(`[${d[0]}="${d[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&pe(s))for(i=s.split(/\s+/),c=0;c<i.length;c++)r.push(`.${i[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)o=l[c],a=n.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}function Cp(t){return at.document&&at.document.querySelector?at.document.querySelector(t):null}function xp(t){if(!at.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement&&e.dataset.sentryComponent)return e.dataset.sentryComponent;e=e.parentNode}return null}const bt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Op="Sentry Logger ",di=["debug","info","warn","error","log","assert","trace"],fi={};function Ko(t){if(!("console"in O))return t();const e=O.console,n={},r=Object.keys(fi);r.forEach(s=>{const i=fi[s];n[s]=e[s],e[s]=i});try{return t()}finally{r.forEach(s=>{e[s]=n[s]})}}function Np(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return bt?di.forEach(n=>{e[n]=(...r)=>{t&&Ko(()=>{O.console[n](`${Op}[${n}]:`,...r)})}}):di.forEach(n=>{e[n]=()=>{}}),e}const y=Np();function kp(t,e=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function F(t,e,n){if(!(e in t))return;const r=t[e],s=n(r);typeof s=="function"&&Pp(s,r),t[e]=s}function on(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{bt&&y.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Pp(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,on(t,"__sentry_original__",e)}catch{}}function V(t){return Tr(t,new Map)}function Tr(t,e){if(Lp(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const s of Object.keys(t))typeof t[s]<"u"&&(r[s]=Tr(t[s],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(s=>{r.push(Tr(s,e))}),r}return t}function Lp(t){if(!Vo(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||e==="Object"}catch{return!0}}const Vn="<anonymous>";function Qo(t){try{return!t||typeof t!="function"?Vn:t.name||Vn}catch{return Vn}}const Xt={},pi={};function Tt(t,e){Xt[t]=Xt[t]||[],Xt[t].push(e)}function vt(t,e){pi[t]||(e(),pi[t]=!0)}function ce(t,e){const n=t&&Xt[t];if(n)for(const r of n)try{r(e)}catch(s){bt&&y.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Qo(r)}
Error:`,s)}}function L(){const t=O,e=t.crypto||t.msCrypto;let n=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function vr(t){return Array.isArray(t)?t:[t]}const wr=Xr();function Dp(){if(!("fetch"in wr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function hi(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function $p(){if(typeof EdgeRuntime=="string")return!0;if(!Dp())return!1;if(hi(wr.fetch))return!0;let t=!1;const e=wr.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=hi(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){bt&&y.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function Mp(t){const e="fetch";Tt(e,t),vt(e,Bp)}function Bp(){$p()&&F(O,"fetch",function(t){return function(...e){const{method:n,url:r}=Fp(e),s={args:e,fetchData:{method:n,url:r},startTimestamp:Date.now()};return ce("fetch",{...s}),t.apply(O,e).then(i=>{const o={...s,endTimestamp:Date.now(),response:i};return ce("fetch",o),i},i=>{const o={...s,endTimestamp:Date.now(),error:i};throw ce("fetch",o),i})}})}function Ir(t,e){return!!t&&typeof t=="object"&&!!t[e]}function mi(t){return typeof t=="string"?t:t?Ir(t,"url")?t.url:t.toString?t.toString():"":""}function Fp(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:mi(n),method:Ir(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:mi(e),method:Ir(e,"method")?String(e.method).toUpperCase():"GET"}}let Mt=null;function Up(t){const e="error";Tt(e,t),vt(e,Hp)}function Hp(){Mt=O.onerror,O.onerror=function(t,e,n,r,s){return ce("error",{column:r,error:s,line:n,msg:t,url:e}),Mt&&!Mt.__SENTRY_LOADER__?Mt.apply(this,arguments):!1},O.onerror.__SENTRY_INSTRUMENTED__=!0}let Bt=null;function jp(t){const e="unhandledrejection";Tt(e,t),vt(e,qp)}function qp(){Bt=O.onunhandledrejection,O.onunhandledrejection=function(t){return ce("unhandledrejection",t),Bt&&!Bt.__SENTRY_LOADER__?Bt.apply(this,arguments):!0},O.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Ft=Xr();function Gp(){const t=Ft.chrome,e=t&&t.app&&t.app.runtime,n="history"in Ft&&!!Ft.history.pushState&&!!Ft.history.replaceState;return!e&&n}const st=O;let Ut;function Wp(t){const e="history";Tt(e,t),vt(e,zp)}function zp(){if(!Gp())return;const t=st.onpopstate;st.onpopstate=function(...n){const r=st.location.href,s=Ut;if(Ut=r,ce("history",{from:s,to:r}),t)try{return t.apply(this,n)}catch{}};function e(n){return function(...r){const s=r.length>2?r[2]:void 0;if(s){const i=Ut,o=String(s);Ut=o,ce("history",{from:i,to:o})}return n.apply(this,r)}}F(st.history,"pushState",e),F(st.history,"replaceState",e)}const Yp=O,ot="__sentry_xhr_v3__";function Vp(t){const e="xhr";Tt(e,t),vt(e,Jp)}function Jp(){if(!Yp.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;F(t,"open",function(e){return function(...n){const r=Date.now(),s=pe(n[0])?n[0].toUpperCase():void 0,i=Xp(n[1]);if(!s||!i)return e.apply(this,n);this[ot]={method:s,url:i,request_headers:{}},s==="POST"&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const a=this[ot];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const c={args:[s,i],endTimestamp:Date.now(),startTimestamp:r,xhr:this};ce("xhr",c)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?F(this,"onreadystatechange",function(a){return function(...c){return o(),a.apply(this,c)}}):this.addEventListener("readystatechange",o),F(this,"setRequestHeader",function(a){return function(...c){const[u,l]=c,d=this[ot];return d&&pe(u)&&pe(l)&&(d.request_headers[u.toLowerCase()]=l),a.apply(this,c)}}),e.apply(this,n)}}),F(t,"send",function(e){return function(...n){const r=this[ot];if(!r)return e.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const s={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return ce("xhr",s),e.apply(this,n)}})}function Xp(t){if(pe(t))return t;try{return t.toString()}catch{}}function Kp(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Qp(){return!Kp()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function be(t,e){return t.require(e)}function Oe(t){let e;try{e=be(fe,t)}catch{}try{const{cwd:n}=be(fe,"process");e=be(fe,`${n()}/node_modules/${t}`)}catch{}return e}var se;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(se||(se={}));class de{constructor(e){de.prototype.__init.call(this),de.prototype.__init2.call(this),de.prototype.__init3.call(this),de.prototype.__init4.call(this),this._state=se.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new de((r,s)=>{this._handlers.push([!1,i=>{if(!e)r(i);else try{r(e(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new de((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,e&&e()},o=>{i=!0,s=o,e&&e()}).then(()=>{if(i){r(s);return}n(s)})})}__init(){this._resolve=e=>{this._setResult(se.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(se.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{if(this._state===se.PENDING){if(_e(n)){n.then(this._resolve,this._reject);return}this._state=e,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===se.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===se.RESOLVED&&n[1](this._value),this._state===se.REJECTED&&n[2](this._value),n[0]=!0)})}}}function In(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}function an(t){return t.split(/[\?#]/,1)[0]}function cn(t){return t.split(/\\?\//).filter(e=>e.length>0&&e!==",").length}function Zp(t,e={}){const n=t.method&&t.method.toUpperCase();let r="",s="url";e.customRoute||t.route?(r=e.customRoute||`${t.baseUrl||""}${t.route&&t.route.path}`,s="route"):(t.originalUrl||t.url)&&(r=an(t.originalUrl||t.url||""));let i="";return e.method&&n&&(i+=n),e.method&&e.path&&(i+=" "),e.path&&r&&(i+=r),[i,s]}const Zo=1e3;function Kr(){return Date.now()/Zo}function eh(){const{performance:t}=O;if(!t||!t.now)return Kr;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/Zo}const wt=eh(),Y=(()=>{const{performance:t}=O;if(!t||!t.now)return;const e=3600*1e3,n=t.now(),r=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,i=s<e,o=t.timing&&t.timing.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):e,u=c<e;return i||u?s<=c?t.timeOrigin:o:r})(),Rr="baggage",ea="sentry-",th=/^sentry-/,nh=8192;function rh(t){if(!pe(t)&&!Array.isArray(t))return;let e={};if(Array.isArray(t))e=t.reduce((r,s)=>{const i=gi(s);for(const o of Object.keys(i))r[o]=i[o];return r},{});else{if(!t)return;e=gi(t)}const n=Object.entries(e).reduce((r,[s,i])=>{if(s.match(th)){const o=s.slice(ea.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function ta(t){if(!t)return;const e=Object.entries(t).reduce((n,[r,s])=>(s&&(n[`${ea}${r}`]=s),n),{});return sh(e)}function gi(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(e[n]=r,e),{})}function sh(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[n,r],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=s===0?i:`${e},${i}`;return o.length>nh?(bt&&y.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):o},"")}const ih=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function oh(t){if(!t)return;const e=t.match(ih);if(!e)return;let n;return e[3]==="1"?n=!0:e[3]==="0"&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function ah(t,e){const n=oh(t),r=rh(e),{traceId:s,parentSpanId:i,parentSampled:o}=n||{};return n?{traceId:s||L(),parentSpanId:i||L().substring(16),spanId:L().substring(16),sampled:o,dsc:r||{}}:{traceId:s||L(),spanId:L().substring(16)}}function Qr(t=L(),e=L().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}function ch(t,e=[]){return[t,e]}function R(t){let e,n=t[0],r=1;for(;r<t.length;){const s=t[r],i=t[r+1];if(r+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(e=n,n=i(n)):(s==="call"||s==="optionalCall")&&(n=i((...o)=>n.call(e,...o)),e=void 0)}return n}const A=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,na="production";function uh(){return Xo("globalEventProcessors",()=>[])}function Ar(t,e,n,r=0){return new de((s,i)=>{const o=t[r];if(e===null||typeof o!="function")s(e);else{const a=o({...e},n);A&&o.id&&a===null&&y.log(`Event processor "${o.id}" dropped event`),_e(a)?a.then(c=>Ar(t,c,n,r+1).then(s)).then(null,i):Ar(t,a,n,r+1).then(s).then(null,i)}})}function lh(t){const e=wt(),n={sid:L(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>fh(n)};return t&&Rn(n,t),n}function Rn(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||wt(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:L()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function dh(t,e){let n={};t.status==="ok"&&(n={status:"exited"}),Rn(t,n)}function fh(t){return V({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}const ph=0,ra=1;function Zr(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:s,parent_span_id:i,status:o,tags:a,origin:c}=B(t);return V({data:r,op:s,parent_span_id:i,span_id:e,status:o,tags:a,trace_id:n,origin:c})}function An(t){const{traceId:e,spanId:n}=t.spanContext(),r=es(t);return Qr(e,n,r)}function Cn(t){return typeof t=="number"?_i(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?_i(t.getTime()):wt()}function _i(t){return t>9999999999?t/1e3:t}function B(t){return hh(t)?t.getSpanJSON():typeof t.toJSON=="function"?t.toJSON():{}}function hh(t){return typeof t.getSpanJSON=="function"}function es(t){const{traceFlags:e}=t.spanContext();return!!(e&ra)}function mh(...t){const e=le();if(t.length===2){const[n,r]=t;return n?e.withScope(()=>(e.getStackTop().scope=n,r(n))):e.withScope(r)}return e.withScope(t[0])}function Qe(){return le().getClient()}function Ze(){return le().getScope()}function un(t){return t.transaction}function ts(t,e,n){const r=e.getOptions(),{publicKey:s}=e.getDsn()||{},{segment:i}=n&&n.getUser()||{},o=V({environment:r.environment||na,release:r.release,user_segment:i,public_key:s,trace_id:t});return e.emit&&e.emit("createDsc",o),o}function We(t){const e=Qe();if(!e)return{};const n=ts(B(t).trace_id||"",e,Ze()),r=un(t);if(!r)return n;const s=r&&r._frozenDynamicSamplingContext;if(s)return s;const{sampleRate:i,source:o}=r.metadata;i!=null&&(n.sample_rate=`${i}`);const a=B(r);return o&&o!=="url"&&(n.transaction=a.description),n.sampled=String(es(r)),e.emit&&e.emit("createDsc",n),n}function gh(t,e){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=e;_h(t,e),r&&Eh(t,r),bh(t,n),yh(t,s),Sh(t,i)}function _h(t,e){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=e,c=V(n);c&&Object.keys(c).length&&(t.extra={...c,...t.extra});const u=V(r);u&&Object.keys(u).length&&(t.tags={...u,...t.tags});const l=V(s);l&&Object.keys(l).length&&(t.user={...l,...t.user});const d=V(i);d&&Object.keys(d).length&&(t.contexts={...d,...t.contexts}),o&&(t.level=o),a&&(t.transaction=a)}function yh(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function Sh(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function Eh(t,e){t.contexts={trace:Zr(e),...t.contexts};const n=un(e);if(n){t.sdkProcessingMetadata={dynamicSamplingContext:We(e),...t.sdkProcessingMetadata};const r=B(n).description;r&&(t.tags={transaction:r,...t.tags})}}function bh(t,e){t.fingerprint=t.fingerprint?vr(t.fingerprint):[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}const Th=100;class Fe{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=yi()}static clone(e){return e?e.clone():new Fe}clone(){const e=new Fe;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Rn(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e;if(n instanceof Fe){const r=n.getScopeData();this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&Object.keys(r.user).length&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint.length&&(this._fingerprint=r.fingerprint),n.getRequestSession()&&(this._requestSession=n.getRequestSession()),r.propagationContext&&(this._propagationContext=r.propagationContext)}else if(Vo(n)){const r=e;this._tags={...this._tags,...r.tags},this._extra={...this._extra,...r.extra},this._contexts={...this._contexts,...r.contexts},r.user&&(this._user=r.user),r.level&&(this._level=r.level),r.fingerprint&&(this._fingerprint=r.fingerprint),r.requestSession&&(this._requestSession=r.requestSession),r.propagationContext&&(this._propagationContext=r.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=yi(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:Th;if(r<=0)return this;const s={timestamp:Kr(),...e},i=this._breadcrumbs;return i.push(s),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:n,_contexts:r,_tags:s,_extra:i,_user:o,_level:a,_fingerprint:c,_eventProcessors:u,_propagationContext:l,_sdkProcessingMetadata:d,_transactionName:p,_span:h}=this;return{breadcrumbs:e,attachments:n,contexts:r,tags:s,extra:i,user:o,level:a,fingerprint:c||[],eventProcessors:u,propagationContext:l,sdkProcessingMetadata:d,transactionName:p,span:h}}applyToEvent(e,n={},r=[]){gh(e,this.getScopeData());const s=[...r,...uh(),...this._eventProcessors];return Ar(s,e,n)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:L();if(!this._client)return y.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...n,event_id:r},this),r}captureMessage(e,n,r){const s=r&&r.event_id?r.event_id:L();if(!this._client)return y.warn("No client configured on scope - will not capture message!"),s;const i=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:s},this),s}captureEvent(e,n){const r=n&&n.event_id?n.event_id:L();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(y.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function yi(){return{traceId:L(),spanId:L().substring(16)}}const vh="7.120.3",sa=parseFloat(vh),wh=100;class ia{constructor(e,n,r,s=sa){this._version=s;let i;n?i=n:(i=new Fe,i.setClient(e));let o;r?o=r:(o=new Fe,o.setClient(e)),this._stack=[{scope:i}],e&&this.bindClient(e),this._isolationScope=o}isOlderThan(e){return this._version<e}bindClient(e){const n=this.getStackTop();n.client=e,n.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const n=this.pushScope();let r;try{r=e(n)}catch(s){throw this.popScope(),s}return _e(r)?r.then(s=>(this.popScope(),s),s=>{throw this.popScope(),s}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:L(),s=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:s,...n,event_id:r}),r}captureMessage(e,n,r){const s=this._lastEventId=r&&r.event_id?r.event_id:L(),i=new Error(e);return this.getScope().captureMessage(e,n,{originalException:e,syntheticException:i,...r,event_id:s}),s}captureEvent(e,n){const r=n&&n.event_id?n.event_id:L();return e.type||(this._lastEventId=r),this.getScope().captureEvent(e,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,n){const{scope:r,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=wh}=s.getOptions&&s.getOptions()||{};if(o<=0)return;const c={timestamp:Kr(),...e},u=i?Ko(()=>i(c,n)):c;u!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",u,n),r.addBreadcrumb(u,o))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,n){this.getScope().setTag(e,n),this.getIsolationScope().setTag(e,n)}setExtra(e,n){this.getScope().setExtra(e,n),this.getIsolationScope().setExtra(e,n)}setContext(e,n){this.getScope().setContext(e,n),this.getIsolationScope().setContext(e,n)}configureScope(e){const{scope:n,client:r}=this.getStackTop();r&&e(n)}run(e){const n=Si(this);try{e(this)}finally{Si(n)}}getIntegration(e){const n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return A&&y.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,n){const r=this._callExtensionMethod("startTransaction",e,n);return A&&!r&&(this.getClient()?y.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):y.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&dh(r),this._sendSessionUpdate(),n.setSession()}startSession(e){const{scope:n,client:r}=this.getStackTop(),{release:s,environment:i=na}=r&&r.getOptions()||{},{userAgent:o}=O.navigator||{},a=lh({release:s,environment:i,user:n.getUser(),...o&&{userAgent:o},...e}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&Rn(c,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),n=e&&e.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:n}=this.getStackTop(),r=e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(e,...n){const s=De().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[e]=="function")return s.extensions[e].apply(this,n);A&&y.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function De(){return O.__SENTRY__=O.__SENTRY__||{extensions:{},hub:void 0},O}function Si(t){const e=De(),n=Cr(e);return oa(e,t),n}function le(){const t=De();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return Ih(t)}function ns(){return le().getIsolationScope()}function Ih(t=De()){return(!Ah(t)||Cr(t).isOlderThan(sa))&&oa(t,new ia),Cr(t)}function Rh(t,e={}){const n=De();return n.__SENTRY__&&n.__SENTRY__.acs?n.__SENTRY__.acs.runWithAsyncContext(t,e):t()}function Ah(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function Cr(t){return Xo("hub",()=>new ia,t)}function oa(t,e){if(!t)return!1;const n=t.__SENTRY__=t.__SENTRY__||{};return n.hub=e,!0}function Ne(t){return(t||le()).getScope().getTransaction()}let Ei=!1;function Ch(){Ei||(Ei=!0,Up(xr),jp(xr))}function xr(){const t=Ne();if(t){const e="internal_error";A&&y.log(`[Tracing] Transaction: ${e} -> Global error occured`),t.setStatus(e)}}xr.tag="sentry_tracingErrorCallback";var bi;(function(t){const e="ok";t.Ok=e;const n="deadline_exceeded";t.DeadlineExceeded=n;const r="unauthenticated";t.Unauthenticated=r;const s="permission_denied";t.PermissionDenied=s;const i="not_found";t.NotFound=i;const o="resource_exhausted";t.ResourceExhausted=o;const a="invalid_argument";t.InvalidArgument=a;const c="unimplemented";t.Unimplemented=c;const u="unavailable";t.Unavailable=u;const l="internal_error";t.InternalError=l;const d="unknown_error";t.UnknownError=d;const p="cancelled";t.Cancelled=p;const h="already_exists";t.AlreadyExists=h;const f="failed_precondition";t.FailedPrecondition=f;const m="aborted";t.Aborted=m;const _="out_of_range";t.OutOfRange=_;const S="data_loss";t.DataLoss=S})(bi||(bi={}));function xh(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}function rs(t,e){t.setTag("http.status_code",String(e)),t.setData("http.response.status_code",e);const n=xh(e);n!=="unknown_error"&&t.setStatus(n)}function Oh(t,e,n=()=>{}){let r;try{r=t()}catch(s){throw e(s),n(),s}return Nh(r,e,n)}function Nh(t,e,n){return _e(t)?t.then(r=>(n(),r),r=>{throw e(r),n(),r}):(n(),t)}function et(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=Qe(),n=t||e&&e.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function kh(t,e){const n=ua(t);return Rh(()=>mh(t.scope,r=>{const s=le(),i=r.getSpan(),a=t.onlyIfParent&&!i?void 0:ca(s,{parentSpan:i,spanContext:n,forceTransaction:t.forceTransaction,scope:r});return Oh(()=>e(a),()=>{if(a){const{status:c}=B(a);(!c||c==="ok")&&a.setStatus("internal_error")}},()=>a&&a.end())}))}function aa(t){if(!et())return;const e=ua(t),n=le(),r=t.scope?t.scope.getSpan():Ph();if(t.onlyIfParent&&!r)return;const o=(t.scope||Ze()).clone();return ca(n,{parentSpan:r,spanContext:e,forceTransaction:t.forceTransaction,scope:o})}function Ph(){return Ze().getSpan()}function ca(t,{parentSpan:e,spanContext:n,forceTransaction:r,scope:s}){if(!et())return;const i=ns();let o;if(e&&!r)o=e.startChild(n);else if(e){const a=We(e),{traceId:c,spanId:u}=e.spanContext(),l=es(e);o=t.startTransaction({traceId:c,parentSpanId:u,parentSampled:l,...n,metadata:{dynamicSamplingContext:a,...n.metadata}})}else{const{traceId:a,dsc:c,parentSpanId:u,sampled:l}={...i.getPropagationContext(),...s.getPropagationContext()};o=t.startTransaction({traceId:a,parentSpanId:u,parentSampled:l,...n,metadata:{dynamicSamplingContext:c,...n.metadata}})}return s.setSpan(o),Lh(o,s,i),o}function ua(t){if(t.startTime){const e={...t};return e.startTimestamp=Cn(t.startTime),delete e.startTime,e}return t}const la="_sentryScope",da="_sentryIsolationScope";function Lh(t,e,n){t&&(on(t,da,n),on(t,la,e))}function Dh(t){return{scope:t[la],isolationScope:t[da]}}const he="sentry.source",Be="sentry.sample_rate",Ht="sentry.op",Te="sentry.origin",$h="profile_id";class fa{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class xn{constructor(e={}){this._traceId=e.traceId||L(),this._spanId=e.spanId||L().substring(16),this._startTime=e.startTimestamp||wt(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[Te]:e.origin||"manual",[Ht]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),e.exclusiveTime!==void 0&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[Ht]}set op(e){this.setAttribute(Ht,e)}get origin(){return this._attributes[Te]}set origin(e){this.setAttribute(Te,e)}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?ra:ph}}startChild(e){const n=new xn({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n);const r=un(this);if(n.transaction=r,A&&r){const s=e&&e.op||"< unknown op >",i=B(n).description||"< unknown name >",o=r.spanContext().spanId,a=`[Tracing] Starting '${s}' span on transaction '${i}' (${o}).`;y.log(a),this._logMessage=a}return n}setTag(e,n){return this.tags={...this.tags,[e]:n},this}setData(e,n){return this.data={...this.data,[e]:n},this}setAttribute(e,n){n===void 0?delete this._attributes[e]:this._attributes[e]=n}setAttributes(e){Object.keys(e).forEach(n=>this.setAttribute(n,e[n]))}setStatus(e){return this._status=e,this}setHttpStatus(e){return rs(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return this._status==="ok"}finish(e){return this.end(e)}end(e){if(this._endTime)return;const n=un(this);if(A&&n&&n.spanContext().spanId!==this._spanId){const r=this._logMessage;r&&y.log(r.replace("Starting","Finishing"))}this._endTime=Cn(e)}toTraceparent(){return An(this)}toContext(){return V({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return Zr(this)}getSpanJSON(){return V({data:this._getData(),description:this._name,op:this._attributes[Ht],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Te],_metrics_summary:void 0,profile_id:this._attributes[$h],exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:n}=this,r=Object.keys(e).length>0,s=Object.keys(n).length>0;if(!(!r&&!s))return r&&s?{...e,...n}:r?e:n}}class pa extends xn{constructor(e,n){super(e),this._contexts={},this._hub=n||le(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[he]&&{source:this._attributes[he]},...this._attributes[Be]&&{sampleRate:this._attributes[Be]}}}set metadata(e){this._metadata=e}setName(e,n="custom"){this._name=e,this.setAttribute(he,n)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new fa(e)),this.spanRecorder.add(this)}setContext(e,n){n===null?delete this._contexts[e]:this._contexts[e]=n}setMeasurement(e,n,r=""){this._measurements[e]={value:n,unit:r}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const n=Cn(e),r=this._finishTransaction(n);if(r)return this._hub.captureEvent(r)}toContext(){const e=super.toContext();return V({...e,name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return We(this)}setHub(e){this._hub=e}getProfileId(){if(this._contexts!==void 0&&this._contexts.profile!==void 0)return this._contexts.profile.profile_id}_finishTransaction(e){if(this._endTime!==void 0)return;this._name||(A&&y.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this._sampled!==!0){A&&y.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(l=>l!==this&&B(l).timestamp):[];if(this._trimEnd&&r.length>0){const l=r.map(d=>B(d).timestamp).filter(Boolean);this._endTime=l.reduce((d,p)=>d>p?d:p)}const{scope:s,isolationScope:i}=Dh(this),{metadata:o}=this,{source:a}=o,c={contexts:{...this._contexts,trace:Zr(this)},spans:r,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...o,capturedSpanScope:s,capturedSpanIsolationScope:i,...V({dynamicSamplingContext:We(this)})},_metrics_summary:void 0,...a&&{transaction_info:{source:a}}};return Object.keys(this._measurements).length>0&&(A&&y.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),A&&y.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const Kt={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},Mh="finishReason",Me=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class Bh extends fa{constructor(e,n,r,s){super(s),this._pushActivity=e,this._popActivity=n,this.transactionSpanId=r}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const n=e.end;e.end=(...r)=>(this._popActivity(e.spanContext().spanId),n.apply(e,r)),B(e).timestamp===void 0&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class Fh extends pa{constructor(e,n,r=Kt.idleTimeout,s=Kt.finalTimeout,i=Kt.heartbeatInterval,o=!1,a=!1){super(e,n),this._idleHub=n,this._idleTimeout=r,this._finalTimeout=s,this._heartbeatInterval=i,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Me[4],this._autoFinishAllowed=!a,o&&(A&&y.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),n.getScope().setSpan(this)),a||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Me[3],this.end())},this._finalTimeout)}end(e){const n=Cn(e);if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setAttribute(Mh,this._finishReason),this.spanRecorder){A&&y.log("[Tracing] finishing IdleTransaction",new Date(n*1e3).toISOString(),this.op);for(const r of this._beforeFinishCallbacks)r(this,n);this.spanRecorder.spans=this.spanRecorder.spans.filter(r=>{if(r.spanContext().spanId===this.spanContext().spanId)return!0;B(r).timestamp||(r.setStatus("cancelled"),r.end(n),A&&y.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(r,void 0,2)));const{start_timestamp:s,timestamp:i}=B(r),o=s&&s<n,a=(this._finalTimeout+this._idleTimeout)/1e3,c=i&&s&&i-s<a;if(A){const u=JSON.stringify(r,void 0,2);o?c||y.log("[Tracing] discarding Span since it finished after Transaction final timeout",u):y.log("[Tracing] discarding Span since it happened after Transaction was finished",u)}return o&&c}),A&&y.log("[Tracing] flushing IdleTransaction")}else A&&y.log("[Tracing] No active IdleTransaction");if(this._onScope){const r=this._idleHub.getScope();r.getTransaction()===this&&r.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const n=s=>{this._finished||this._pushActivity(s)},r=s=>{this._finished||this._popActivity(s)};this.spanRecorder=new Bh(n,r,this.spanContext().spanId,e),A&&y.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Me[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(A&&y.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=Me[1],this.end(e))},this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),A&&y.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,A&&y.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(A&&y.log(`[Tracing] popActivity ${e}`),delete this.activities[e],A&&y.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=wt();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=Me[5],this.end(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(A&&y.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Me[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){A&&y.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function ha(t,e,n){if(!et(e))return t.sampled=!1,t;if(t.sampled!==void 0)return t.setAttribute(Be,Number(t.sampled)),t;let r;return typeof e.tracesSampler=="function"?(r=e.tracesSampler(n),t.setAttribute(Be,Number(r))):n.parentSampled!==void 0?r=n.parentSampled:typeof e.tracesSampleRate<"u"?(r=e.tracesSampleRate,t.setAttribute(Be,Number(r))):(r=1,t.setAttribute(Be,r)),ma(r)?r?(t.sampled=Math.random()<r,t.sampled?(A&&y.log(`[Tracing] starting ${t.op} transaction - ${B(t).description}`),t):(A&&y.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),t)):(A&&y.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),t.sampled=!1,t):(A&&y.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)}function ma(t){return vp(t)||!(typeof t=="number"||typeof t=="boolean")?(A&&y.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1):t<0||t>1?(A&&y.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${t}.`),!1):!0}function Uh(){const e=this.getScope().getSpan();return e?{"sentry-trace":An(e)}:{}}function Hh(t,e){const n=this.getClient(),r=n&&n.getOptions()||{},s=r.instrumenter||"sentry",i=t.instrumenter||"sentry";s!==i&&(A&&y.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${s}\` instrumenter.
The transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),t.sampled=!1);let o=new pa(t,this);return o=ha(o,r,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...e}),o.isRecording()&&o.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function Ti(t,e,n,r,s,i,o,a=!1){const c=t.getClient(),u=c&&c.getOptions()||{};let l=new Fh(e,t,n,r,o,s,a);return l=ha(l,u,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...i}),l.isRecording()&&l.initSpanRecorder(u._experiments&&u._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",l),l}function ga(){const t=De();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=Hh),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=Uh),Ch())}function jh(t,e,n){const r=Ne();r&&r.setMeasurement(t,e,n)}function qh(t,e){const n={sent_at:new Date().toISOString()};e&&(n.dsn=kp(e));const r=t.map(Gh);return ch(n,r)}function Gh(t){return[{type:"span"},t]}const b=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function $e(t){const e=R([t,"call",r=>r(),"access",r=>r.getClient,"call",r=>r(),"optionalAccess",r=>r.getOptions,"call",r=>r()]);return(R([e,"optionalAccess",r=>r.instrumenter])||"sentry")!=="sentry"}class On{static __initStatic(){this.id="Express"}constructor(e={}){this.name=On.id,this._router=e.router||e.app,this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}setupOnce(e,n){if(!this._router){b&&y.error("ExpressIntegration is missing an Express instance");return}if($e(n)){b&&y.log("Express Integration is skipped because of instrumenter configuration.");return}Yh(this._router,this._methods),Vh(this._router)}}On.__initStatic();function vi(t,e){const n=t.length;switch(n){case 2:return function(r,s){const i=s.__sentry_transaction;if(i){const o=i.startChild({description:t.name,op:`middleware.express.${e}`,origin:"auto.middleware.express"});s.once("finish",()=>{o.end()})}return t.call(this,r,s)};case 3:return function(r,s,i){const o=s.__sentry_transaction,a=R([o,"optionalAccess",c=>c.startChild,"call",c=>c({description:t.name,op:`middleware.express.${e}`,origin:"auto.middleware.express"})]);t.call(this,r,s,function(...c){R([a,"optionalAccess",u=>u.end,"call",u=>u()]),i.call(this,...c)})};case 4:return function(r,s,i,o){const a=i.__sentry_transaction,c=R([a,"optionalAccess",u=>u.startChild,"call",u=>u({description:t.name,op:`middleware.express.${e}`,origin:"auto.middleware.express"})]);t.call(this,r,s,i,function(...u){R([c,"optionalAccess",l=>l.end,"call",l=>l()]),o.call(this,...u)})};default:throw new Error(`Express middleware takes 2-4 arguments. Got: ${n}`)}}function Wh(t,e){return t.map(n=>typeof n=="function"?vi(n,e):Array.isArray(n)?n.map(r=>typeof r=="function"?vi(r,e):r):n)}function zh(t,e){const n=t[e];return t[e]=function(...r){return n.call(this,...Wh(r,e))},t}function Yh(t,e=[]){e.forEach(n=>zh(t,n))}function Vh(t){const e="settings"in t;e&&t._router===void 0&&t.lazyrouter&&t.lazyrouter();const n=e?t._router:t;if(!n){b&&y.debug("Cannot instrument router for URL Parameterization (did not find a valid router)."),b&&y.debug("Routing instrumentation is currently only supported in Express 4.");return}const r=Object.getPrototypeOf(n),s=r.process_params;r.process_params=function(o,a,c,u,l){c._reconstructedRoute||(c._reconstructedRoute="");const{layerRoutePath:d,isRegex:p,isArray:h,numExtraSegments:f}=Xh(o);(d||p||h)&&(c._hasParameters=!0);let m;d?m=d:m=Zh(c.originalUrl,c._reconstructedRoute,o.path)||"";const _=m.split("/").filter(I=>I.length>0&&(p||h||!I.includes("*"))).join("/");_&&_.length>0&&(c._reconstructedRoute+=`/${_}${p?"/":""}`);const S=cn(an(c.originalUrl||""))+f,T=cn(c._reconstructedRoute);if(S===T){c._hasParameters||c._reconstructedRoute!==c.originalUrl&&(c._reconstructedRoute=c.originalUrl?an(c.originalUrl):c.originalUrl);const I=u.__sentry_transaction,H=I&&B(I).data||{};if(I&&H[he]!=="custom"){const $=c._reconstructedRoute||"/",[K,te]=Zp(c,{path:!0,method:!0,customRoute:$});I.updateName(K),I.setAttribute(he,te)}}return s.call(this,o,a,c,u,l)}}const Jh=(t,e,n)=>{if(!t||!e||!n||Object.keys(n).length===0||R([n,"access",u=>u[0],"optionalAccess",u=>u.offset])===void 0||R([n,"access",u=>u[0],"optionalAccess",u=>u.offset])===null)return;const r=n.sort((u,l)=>u.offset-l.offset),i=new RegExp(e,`${e.flags}d`).exec(t);if(!i||!i.indices)return;const[,...o]=i.indices;if(o.length!==r.length)return;let a=t,c=0;return o.forEach((u,l)=>{if(u){const[d,p]=u,h=a.substring(0,d-c),f=`:${r[l].name}`,m=a.substring(p-c);a=h+f+m,c=c+(p-d-f.length)}}),a};function Xh(t){let e=R([t,"access",o=>o.route,"optionalAccess",o=>o.path]);const n=Jo(e),r=Array.isArray(e);if(!e){const[o]=O.process.versions.node.split(".").map(Number);o>=16&&(e=Jh(t.path,t.regexp,t.keys))}if(!e)return{isRegex:n,isArray:r,numExtraSegments:0};const s=r?Math.max(Kh(e)-cn(t.path||""),0):0;return{layerRoutePath:Qh(r,e),isRegex:n,isArray:r,numExtraSegments:s}}function Kh(t){return t.reduce((e,n)=>e+cn(n.toString()),0)}function Qh(t,e){return t?e.map(n=>n.toString()).join(","):e&&e.toString()}function Zh(t,e,n){const r=an(t||""),s=R([r,"optionalAccess",c=>c.split,"call",c=>c("/"),"access",c=>c.filter,"call",c=>c(u=>!!u)]);let i=0;const o=R([e,"optionalAccess",c=>c.split,"call",c=>c("/"),"access",c=>c.filter,"call",c=>c(u=>!!u),"access",c=>c.length])||0;return R([n,"optionalAccess",c=>c.split,"call",c=>c("/"),"access",c=>c.filter,"call",c=>c(u=>R([s,"optionalAccess",l=>l[o+i]])===u?(i+=1,!0):!1),"access",c=>c.join,"call",c=>c("/")])}class Nn{static __initStatic(){this.id="Postgres"}constructor(e={}){this.name=Nn.id,this._usePgNative=!!e.usePgNative,this._module=e.module}loadDependency(){return this._module=this._module||Oe("pg")}setupOnce(e,n){if($e(n)){b&&y.log("Postgres Integration is skipped because of instrumenter configuration.");return}const r=this.loadDependency();if(!r){b&&y.error("Postgres Integration was unable to require `pg` package.");return}const s=this._usePgNative?R([r,"access",i=>i.native,"optionalAccess",i=>i.Client]):r.Client;if(!s){b&&y.error("Postgres Integration was unable to access 'pg-native' bindings.");return}F(s.prototype,"query",function(i){return function(o,a,c){const l=n().getScope().getSpan(),d={"db.system":"postgresql"};try{this.database&&(d["db.name"]=this.database),this.host&&(d["server.address"]=this.host),this.port&&(d["server.port"]=this.port),this.user&&(d["db.user"]=this.user)}catch{}const p=R([l,"optionalAccess",f=>f.startChild,"call",f=>f({description:typeof o=="string"?o:o.text,op:"db",origin:"auto.db.postgres",data:d})]);if(typeof c=="function")return i.call(this,o,a,function(f,m){R([p,"optionalAccess",_=>_.end,"call",_=>_()]),c(f,m)});if(typeof a=="function")return i.call(this,o,function(f,m){R([p,"optionalAccess",_=>_.end,"call",_=>_()]),a(f,m)});const h=typeof a<"u"?i.call(this,o,a):i.call(this,o);return _e(h)?h.then(f=>(R([p,"optionalAccess",m=>m.end,"call",m=>m()]),f)):(R([p,"optionalAccess",f=>f.end,"call",f=>f()]),h)}})}}Nn.__initStatic();class kn{static __initStatic(){this.id="Mysql"}constructor(){this.name=kn.id}loadDependency(){return this._module=this._module||Oe("mysql/lib/Connection.js")}setupOnce(e,n){if($e(n)){b&&y.log("Mysql Integration is skipped because of instrumenter configuration.");return}const r=this.loadDependency();if(!r){b&&y.error("Mysql Integration was unable to require `mysql` package.");return}let s;try{r.prototype.connect=new Proxy(r.prototype.connect,{apply(a,c,u){return s||(s=c.config),a.apply(c,u)}})}catch{b&&y.error("Mysql Integration was unable to instrument `mysql` config.")}function i(){return s?{"server.address":s.host,"server.port":s.port,"db.user":s.user}:{}}function o(a){if(!a)return;const c=i();Object.keys(c).forEach(u=>{a.setAttribute(u,c[u])}),a.end()}F(r,"createQuery",function(a){return function(c,u,l){const p=n().getScope().getSpan(),h=R([p,"optionalAccess",m=>m.startChild,"call",m=>m({description:typeof c=="string"?c:c.sql,op:"db",origin:"auto.db.mysql",data:{"db.system":"mysql"}})]);if(typeof l=="function")return a.call(this,c,u,function(m,_,S){o(h),l(m,_,S)});if(typeof u=="function")return a.call(this,c,function(m,_,S){o(h),u(m,_,S)});const f=a.call(this,c,u);return f.on("end",()=>{o(h)}),f}})}}kn.__initStatic();const em=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],tm={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};function nm(t){return t&&typeof t=="object"&&t.once&&typeof t.once=="function"}class Pn{static __initStatic(){this.id="Mongo"}constructor(e={}){this.name=Pn.id,this._operations=Array.isArray(e.operations)?e.operations:em,this._describeOperations="describeOperations"in e?e.describeOperations:!0,this._useMongoose=!!e.useMongoose}loadDependency(){const e=this._useMongoose?"mongoose":"mongodb";return this._module=this._module||Oe(e)}setupOnce(e,n){if($e(n)){b&&y.log("Mongo Integration is skipped because of instrumenter configuration.");return}const r=this.loadDependency();if(!r){const s=this._useMongoose?"mongoose":"mongodb";b&&y.error(`Mongo Integration was unable to require \`${s}\` package.`);return}this._instrumentOperations(r.Collection,this._operations,n)}_instrumentOperations(e,n,r){n.forEach(s=>this._patchOperation(e,s,r))}_patchOperation(e,n,r){if(!(n in e.prototype))return;const s=this._getSpanContextFromOperationArguments.bind(this);F(e.prototype,n,function(i){return function(...o){const a=o[o.length-1],c=r(),u=c.getScope(),l=c.getClient(),d=u.getSpan(),p=R([l,"optionalAccess",f=>f.getOptions,"call",f=>f(),"access",f=>f.sendDefaultPii]);if(typeof a!="function"||n==="mapReduce"&&o.length===2){const f=R([d,"optionalAccess",_=>_.startChild,"call",_=>_(s(this,n,o,p))]),m=i.call(this,...o);if(_e(m))return m.then(_=>(R([f,"optionalAccess",S=>S.end,"call",S=>S()]),_));if(nm(m)){const _=m;try{_.once("close",()=>{R([f,"optionalAccess",S=>S.end,"call",S=>S()])})}catch{R([f,"optionalAccess",T=>T.end,"call",T=>T()])}return _}else return R([f,"optionalAccess",_=>_.end,"call",_=>_()]),m}const h=R([d,"optionalAccess",f=>f.startChild,"call",f=>f(s(this,n,o.slice(0,-1)))]);return i.call(this,...o.slice(0,-1),function(f,m){R([h,"optionalAccess",_=>_.end,"call",_=>_()]),a(f,m)})}})}_getSpanContextFromOperationArguments(e,n,r,s=!1){const i={"db.system":"mongodb","db.name":e.dbName,"db.operation":n,"db.mongodb.collection":e.collectionName},o={op:"db",origin:"auto.db.mongo",description:n,data:i},a=tm[n],c=Array.isArray(this._describeOperations)?this._describeOperations.includes(n):this._describeOperations;if(!a||!c||!s)return o;try{if(n==="mapReduce"){const[u,l]=r;i[a[0]]=typeof u=="string"?u:u.name||"<anonymous>",i[a[1]]=typeof l=="string"?l:l.name||"<anonymous>"}else for(let u=0;u<a.length;u++)i[`db.mongodb.${a[u]}`]=JSON.stringify(r[u])}catch{}return o}}Pn.__initStatic();function rm(t){return!!t&&!!t.$use}class Ln{static __initStatic(){this.id="Prisma"}constructor(e={}){if(this.name=Ln.id,rm(e.client)&&!e.client._sentryInstrumented){on(e.client,"_sentryInstrumented",!0);const n={};try{const r=e.client._engineConfig;if(r){const{activeProvider:s,clientVersion:i}=r;s&&(n["db.system"]=s),i&&(n["db.prisma.version"]=i)}}catch{}e.client.$use((r,s)=>{if($e(le))return s(r);const i=r.action,o=r.model;return kh({name:o?`${o} ${i}`:i,onlyIfParent:!0,op:"db.prisma",attributes:{[Te]:"auto.db.prisma"},data:{...n,"db.operation":i}},()=>s(r))})}else b&&y.warn("Unsupported Prisma client provided to PrismaIntegration. Provided client:",e.client)}setupOnce(){}}Ln.__initStatic();class Dn{static __initStatic(){this.id="GraphQL"}constructor(){this.name=Dn.id}loadDependency(){return this._module=this._module||Oe("graphql/execution/execute.js")}setupOnce(e,n){if($e(n)){b&&y.log("GraphQL Integration is skipped because of instrumenter configuration.");return}const r=this.loadDependency();if(!r){b&&y.error("GraphQL Integration was unable to require graphql/execution package.");return}F(r,"execute",function(s){return function(...i){const o=n().getScope(),a=o.getSpan(),c=R([a,"optionalAccess",l=>l.startChild,"call",l=>l({description:"execute",op:"graphql.execute",origin:"auto.graphql.graphql"})]);R([o,"optionalAccess",l=>l.setSpan,"call",l=>l(c)]);const u=s.call(this,...i);return _e(u)?u.then(l=>(R([c,"optionalAccess",d=>d.end,"call",d=>d()]),R([o,"optionalAccess",d=>d.setSpan,"call",d=>d(a)]),l)):(R([c,"optionalAccess",l=>l.end,"call",l=>l()]),R([o,"optionalAccess",l=>l.setSpan,"call",l=>l(a)]),u)}})}}Dn.__initStatic();class $n{static __initStatic(){this.id="Apollo"}constructor(e={useNestjs:!1}){this.name=$n.id,this._useNest=!!e.useNestjs}loadDependency(){return this._useNest?this._module=this._module||Oe("@nestjs/graphql"):this._module=this._module||Oe("apollo-server-core"),this._module}setupOnce(e,n){if($e(n)){b&&y.log("Apollo Integration is skipped because of instrumenter configuration.");return}if(this._useNest){const r=this.loadDependency();if(!r){b&&y.error("Apollo-NestJS Integration was unable to require @nestjs/graphql package.");return}F(r.GraphQLFactory.prototype,"mergeWithSchema",function(s){return function(...i){return F(this.resolversExplorerService,"explore",function(o){return function(){const a=vr(o.call(this));return wi(a,n)}}),s.call(this,...i)}})}else{const r=this.loadDependency();if(!r){b&&y.error("Apollo Integration was unable to require apollo-server-core package.");return}F(r.ApolloServerBase.prototype,"constructSchema",function(s){return function(){if(!this.config.resolvers)return b&&(this.config.schema?(y.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `schema` property.If you are using NestJS with Apollo, please use `Sentry.Integrations.Apollo({ useNestjs: true })` instead."),y.warn()):this.config.modules&&y.warn("Apollo integration is not able to trace `ApolloServer` instances constructed via `modules` property."),y.error("Skipping tracing as no resolvers found on the `ApolloServer` instance.")),s.call(this);const i=vr(this.config.resolvers);return this.config.resolvers=wi(i,n),s.call(this)}})}}}$n.__initStatic();function wi(t,e){return t.map(n=>(Object.keys(n).forEach(r=>{Object.keys(n[r]).forEach(s=>{typeof n[r][s]=="function"&&sm(n,r,s,e)})}),n))}function sm(t,e,n,r){F(t[e],n,function(s){return function(...i){const a=r().getScope().getSpan(),c=R([a,"optionalAccess",l=>l.startChild,"call",l=>l({description:`${e}.${n}`,op:"graphql.resolve",origin:"auto.graphql.apollo"})]),u=s.call(this,...i);return _e(u)?u.then(l=>(R([c,"optionalAccess",d=>d.end,"call",d=>d()]),l)):(R([c,"optionalAccess",l=>l.end,"call",l=>l()]),u)}})}const w=O;function im(){w.document?w.document.addEventListener("visibilitychange",()=>{const t=Ne();if(w.document.hidden&&t){const e="cancelled",{op:n,status:r}=B(t);b&&y.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),r||t.setStatus(e),t.setTag("visibilitychange","document.hidden"),t.end()}}):b&&y.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const It=(t,e,n)=>{let r,s;return i=>{e.value>=0&&(i||n)&&(s=e.value-(r||0),(s||r===void 0)&&(r=e.value,e.delta=s,t(e)))}},om=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,am=()=>{const t=w.performance.timing,e=w.performance.navigation.type,n={entryType:"navigation",startTime:0,type:e==2?"back_forward":e===1?"reload":"navigate"};for(const r in t)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(t[r]-t.navigationStart,0));return n},Mn=()=>w.__WEB_VITALS_POLYFILL__?w.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||am()):w.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],ss=()=>{const t=Mn();return t&&t.activationStart||0},Rt=(t,e)=>{const n=Mn();let r="navigate";return n&&(w.document&&w.document.prerendering||ss()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:t,value:typeof e>"u"?-1:e,rating:"good",delta:0,entries:[],id:om(),navigationType:r}},tt=(t,e,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(s=>{e(s.getEntries())});return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch{}},At=(t,e)=>{const n=r=>{(r.type==="pagehide"||w.document.visibilityState==="hidden")&&(t(r),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};w.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))},cm=(t,e={})=>{const n=Rt("CLS",0);let r,s=0,i=[];const o=c=>{c.forEach(u=>{if(!u.hadRecentInput){const l=i[0],d=i[i.length-1];s&&i.length!==0&&u.startTime-d.startTime<1e3&&u.startTime-l.startTime<5e3?(s+=u.value,i.push(u)):(s=u.value,i=[u]),s>n.value&&(n.value=s,n.entries=i,r&&r())}})},a=tt("layout-shift",o);if(a){r=It(t,n,e.reportAllChanges);const c=()=>{o(a.takeRecords()),r(!0)};return At(c),c}};let ln=-1;const um=()=>{w.document&&w.document.visibilityState&&(ln=w.document.visibilityState==="hidden"&&!w.document.prerendering?0:1/0)},lm=()=>{At(({timeStamp:t})=>{ln=t},!0)},is=()=>(ln<0&&(um(),lm()),{get firstHiddenTime(){return ln}}),dm=t=>{const e=is(),n=Rt("FID");let r;const s=a=>{a.startTime<e.firstHiddenTime&&(n.value=a.processingStart-a.startTime,n.entries.push(a),r(!0))},i=a=>{a.forEach(s)},o=tt("first-input",i);r=It(t,n),o&&At(()=>{i(o.takeRecords()),o.disconnect()},!0)};let _a=0,Jn=1/0,jt=0;const fm=t=>{t.forEach(e=>{e.interactionId&&(Jn=Math.min(Jn,e.interactionId),jt=Math.max(jt,e.interactionId),_a=jt?(jt-Jn)/7+1:0)})};let Or;const pm=()=>Or?_a:performance.interactionCount||0,hm=()=>{"interactionCount"in performance||Or||(Or=tt("event",fm,{type:"event",buffered:!0,durationThreshold:0}))},ya=()=>pm(),Ii=10,ie=[],Xn={},Ri=t=>{const e=ie[ie.length-1],n=Xn[t.interactionId];if(n||ie.length<Ii||t.duration>e.latency){if(n)n.entries.push(t),n.latency=Math.max(n.latency,t.duration);else{const r={id:t.interactionId,latency:t.duration,entries:[t]};Xn[r.id]=r,ie.push(r)}ie.sort((r,s)=>s.latency-r.latency),ie.splice(Ii).forEach(r=>{delete Xn[r.id]})}},mm=()=>{const t=Math.min(ie.length-1,Math.floor(ya()/50));return ie[t]},gm=(t,e)=>{e=e||{},hm();const n=Rt("INP");let r;const s=o=>{o.forEach(c=>{c.interactionId&&Ri(c),c.entryType==="first-input"&&!ie.some(l=>l.entries.some(d=>c.duration===d.duration&&c.startTime===d.startTime))&&Ri(c)});const a=mm();a&&a.latency!==n.value&&(n.value=a.latency,n.entries=a.entries,r())},i=tt("event",s,{durationThreshold:e.durationThreshold||40});r=It(t,n,e.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),At(()=>{s(i.takeRecords()),n.value<0&&ya()>0&&(n.value=0,n.entries=[]),r(!0)}))},Ai={},_m=t=>{const e=is(),n=Rt("LCP");let r;const s=o=>{const a=o[o.length-1];if(a){const c=Math.max(a.startTime-ss(),0);c<e.firstHiddenTime&&(n.value=c,n.entries=[a],r())}},i=tt("largest-contentful-paint",s);if(i){r=It(t,n);const o=()=>{Ai[n.id]||(s(i.takeRecords()),i.disconnect(),Ai[n.id]=!0,r(!0))};return["keydown","click"].forEach(a=>{w.document&&addEventListener(a,o,{once:!0,capture:!0})}),At(o,!0),o}},Nr=t=>{w.document&&(w.document.prerendering?addEventListener("prerenderingchange",()=>Nr(t),!0):w.document.readyState!=="complete"?addEventListener("load",()=>Nr(t),!0):setTimeout(t,0))},ym=(t,e)=>{e=e||{};const n=Rt("TTFB"),r=It(t,n,e.reportAllChanges);Nr(()=>{const s=Mn();if(s){if(n.value=Math.max(s.responseStart-ss(),0),n.value<0||n.value>performance.now())return;n.entries=[s],r(!0)}})},ct={},dn={};let Sa,Ea,ba,Ta,va;function Sm(t,e=!1){return Ct("cls",t,wm,Sa,e)}function Em(t,e=!1){return Ct("lcp",t,Rm,ba,e)}function bm(t){return Ct("ttfb",t,Am,Ta)}function Tm(t){return Ct("fid",t,Im,Ea)}function vm(t){return Ct("inp",t,Cm,va)}function ht(t,e){return wa(t,e),dn[t]||(xm(t),dn[t]=!0),Ia(t,e)}function nt(t,e){const n=ct[t];if(!(!n||!n.length))for(const r of n)try{r(e)}catch(s){b&&y.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Qo(r)}
Error:`,s)}}function wm(){return cm(t=>{nt("cls",{metric:t}),Sa=t},{reportAllChanges:!0})}function Im(){return dm(t=>{nt("fid",{metric:t}),Ea=t})}function Rm(){return _m(t=>{nt("lcp",{metric:t}),ba=t})}function Am(){return ym(t=>{nt("ttfb",{metric:t}),Ta=t})}function Cm(){return gm(t=>{nt("inp",{metric:t}),va=t})}function Ct(t,e,n,r,s=!1){wa(t,e);let i;return dn[t]||(i=n(),dn[t]=!0),r&&e({metric:r}),Ia(t,e,s?i:void 0)}function xm(t){const e={};t==="event"&&(e.durationThreshold=0),tt(t,n=>{nt(t,{entries:n})},e)}function wa(t,e){ct[t]=ct[t]||[],ct[t].push(e)}function Ia(t,e,n){return()=>{n&&n();const r=ct[t];if(!r)return;const s=r.indexOf(e);s!==-1&&r.splice(s,1)}}function Kn(t){return typeof t=="number"&&isFinite(t)}function ze(t,{startTimestamp:e,...n}){return e&&t.startTimestamp>e&&(t.startTimestamp=e),t.startChild({startTimestamp:e,...n})}const Om=2147483647;function D(t){return t/1e3}function os(){return w&&w.addEventListener&&w.performance}let Ci=0,N={},ee,ut;function Nm(){const t=os();if(t&&Y){t.mark&&w.performance.mark("sentry-tracing-init");const e=Mm(),n=Dm(),r=$m(),s=Bm();return()=>{e(),n(),r(),s()}}return()=>{}}function km(){ht("longtask",({entries:t})=>{for(const e of t){const n=Ne();if(!n)return;const r=D(Y+e.startTime),s=D(e.duration);n.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+s})}})}function Pm(){ht("event",({entries:t})=>{for(const e of t){const n=Ne();if(!n)return;if(e.name==="click"){const r=D(Y+e.startTime),s=D(e.duration),i={description:sn(e.target),op:`ui.interaction.${e.name}`,origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+s},o=xp(e.target);o&&(i.attributes={"ui.component_name":o}),n.startChild(i)}}})}function Lm(t,e){if(os()&&Y){const r=Fm(t,e);return()=>{r()}}return()=>{}}function Dm(){return Sm(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(b&&y.log("[Measurements] Adding CLS"),N.cls={value:t.value,unit:""},ut=e)},!0)}function $m(){return Em(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(b&&y.log("[Measurements] Adding LCP"),N.lcp={value:t.value,unit:"millisecond"},ee=e)},!0)}function Mm(){return Tm(({metric:t})=>{const e=t.entries[t.entries.length-1];if(!e)return;const n=D(Y),r=D(e.startTime);b&&y.log("[Measurements] Adding FID"),N.fid={value:t.value,unit:"millisecond"},N["mark.fid"]={value:n+r,unit:"second"}})}function Bm(){return bm(({metric:t})=>{t.entries[t.entries.length-1]&&(b&&y.log("[Measurements] Adding TTFB"),N.ttfb={value:t.value,unit:"millisecond"})})}const xi={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Fm(t,e){return vm(({metric:n})=>{if(n.value===void 0)return;const r=n.entries.find(I=>I.duration===n.value&&xi[I.name]!==void 0),s=Qe();if(!r||!s)return;const i=xi[r.name],o=s.getOptions(),a=D(Y+r.startTime),c=D(n.value),u=r.interactionId!==void 0?t[r.interactionId]:void 0;if(u===void 0)return;const{routeName:l,parentContext:d,activeTransaction:p,user:h,replayId:f}=u,m=h!==void 0?h.email||h.id||h.ip_address:void 0,_=p!==void 0?p.getProfileId():void 0,S=new xn({startTimestamp:a,endTimestamp:a+c,op:`ui.interaction.${i}`,name:sn(r.target),attributes:{release:o.release,environment:o.environment,transaction:l,...m!==void 0&&m!==""?{user:m}:{},..._!==void 0?{profile_id:_}:{},...f!==void 0?{replay_id:f}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),T=Vm(d,o,e);if(T&&Math.random()<T){const I=S?qh([S],s.getDsn()):void 0,H=s&&s.getTransport();H&&I&&H.send(I).then(null,$=>{b&&y.error("Error while sending interaction:",$)});return}})}function Um(t){const e=os();if(!e||!w.performance.getEntries||!Y)return;b&&y.log("[Tracing] Adding & adjusting spans using Performance API");const n=D(Y),r=e.getEntries(),{op:s,start_timestamp:i}=B(t);if(r.slice(Ci).forEach(o=>{const a=D(o.startTime),c=D(o.duration);if(!(t.op==="navigation"&&i&&n+a<i))switch(o.entryType){case"navigation":{jm(t,o,n);break}case"mark":case"paint":case"measure":{Hm(t,o,a,c,n);const u=is(),l=o.startTime<u.firstHiddenTime;o.name==="first-paint"&&l&&(b&&y.log("[Measurements] Adding FP"),N.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&l&&(b&&y.log("[Measurements] Adding FCP"),N.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{Gm(t,o,o.name,a,c,n);break}}}),Ci=Math.max(r.length-1,0),Wm(t),s==="pageload"){Ym(N),["fcp","fp","lcp"].forEach(a=>{if(!N[a]||!i||n>=i)return;const c=N[a].value,u=n+D(c),l=Math.abs((u-i)*1e3),d=l-c;b&&y.log(`[Measurements] Normalized ${a} from ${c} to ${l} (${d})`),N[a].value=l});const o=N["mark.fid"];o&&N.fid&&(ze(t,{description:"first input delay",endTimestamp:o.value+D(N.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:o.value}),delete N["mark.fid"]),"fcp"in N||delete N.cls,Object.keys(N).forEach(a=>{jh(a,N[a].value,N[a].unit)}),zm(t)}ee=void 0,ut=void 0,N={}}function Hm(t,e,n,r,s){const i=s+n,o=i+r;return ze(t,{description:e.name,endTimestamp:o,op:e.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i}),i}function jm(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{qt(t,e,r,n)}),qt(t,e,"secureConnection",n,"TLS/SSL","connectEnd"),qt(t,e,"fetch",n,"cache","domainLookupStart"),qt(t,e,"domainLookup",n,"DNS"),qm(t,e,n)}function qt(t,e,n,r,s,i){const o=i?e[i]:e[`${n}End`],a=e[`${n}Start`];!a||!o||ze(t,{op:"browser",origin:"auto.browser.browser.metrics",description:s||n,startTimestamp:r+D(a),endTimestamp:r+D(o)})}function qm(t,e,n){e.responseEnd&&(ze(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+D(e.requestStart),endTimestamp:n+D(e.responseEnd)}),ze(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+D(e.responseStart),endTimestamp:n+D(e.responseEnd)}))}function Gm(t,e,n,r,s,i){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const o=In(n),a={};Qn(a,e,"transferSize","http.response_transfer_size"),Qn(a,e,"encodedBodySize","http.response_content_length"),Qn(a,e,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in e&&(a["resource.render_blocking_status"]=e.renderBlockingStatus),o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop()),o.host&&(a["server.address"]=o.host),a["url.same_origin"]=n.includes(w.location.origin);const c=i+r,u=c+s;ze(t,{description:n.replace(w.location.origin,""),endTimestamp:u,op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:a})}function Wm(t){const e=w.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),Kn(n.rtt)&&(N["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Kn(e.deviceMemory)&&t.setTag("deviceMemory",`${e.deviceMemory} GB`),Kn(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}function zm(t){ee&&(b&&y.log("[Measurements] Adding LCP Data"),ee.element&&t.setTag("lcp.element",sn(ee.element)),ee.id&&t.setTag("lcp.id",ee.id),ee.url&&t.setTag("lcp.url",ee.url.trim().slice(0,200)),t.setTag("lcp.size",ee.size)),ut&&ut.sources&&(b&&y.log("[Measurements] Adding CLS Data"),ut.sources.forEach((e,n)=>t.setTag(`cls.source.${n+1}`,sn(e.node))))}function Qn(t,e,n,r){const s=e[n];s!=null&&s<Om&&(t[r]=s)}function Ym(t){const e=Mn();if(!e)return;const{responseStart:n,requestStart:r}=e;r<=n&&(b&&y.log("[Measurements] Adding TTFB Request Time"),t["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function Vm(t,e,n){if(!et(e))return!1;let r;return t!==void 0&&typeof e.tracesSampler=="function"?r=e.tracesSampler({transactionContext:t,name:t.name,parentSampled:t.parentSampled,attributes:{...t.data,...t.attributes},location:w.location}):t!==void 0&&t.sampled!==void 0?r=t.sampled:typeof e.tracesSampleRate<"u"?r=e.tracesSampleRate:r=1,ma(r)?r===!0?n:r===!1?0:r*n:(b&&y.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}function Jm(t,e,n,r,s="auto.http.browser"){if(!et()||!t.fetchData)return;const i=e(t.fetchData.url);if(t.endTimestamp&&i){const h=t.fetchData.__span;if(!h)return;const f=r[h];f&&(Qm(f,t),delete r[h]);return}const o=Ze(),a=Qe(),{method:c,url:u}=t.fetchData,l=Km(u),d=l?In(l).host:void 0,p=i?aa({name:`${c} ${u}`,onlyIfParent:!0,attributes:{url:u,type:"fetch","http.method":c,"http.url":l,"server.address":d,[Te]:s},op:"http.client"}):void 0;if(p&&(t.fetchData.__span=p.spanContext().spanId,r[p.spanContext().spanId]=p),n(t.fetchData.url)&&a){const h=t.args[0];t.args[1]=t.args[1]||{};const f=t.args[1];f.headers=Xm(h,a,o,f,p)}return p}function Xm(t,e,n,r,s){const i=s||n.getSpan(),o=ns(),{traceId:a,spanId:c,sampled:u,dsc:l}={...o.getPropagationContext(),...n.getPropagationContext()},d=i?An(i):Qr(a,c,u),p=ta(l||(i?We(i):ts(a,e,n))),h=r.headers||(typeof Request<"u"&&li(t,Request)?t.headers:void 0);if(h)if(typeof Headers<"u"&&li(h,Headers)){const f=new Headers(h);return f.append("sentry-trace",d),p&&f.append(Rr,p),f}else if(Array.isArray(h)){const f=[...h,["sentry-trace",d]];return p&&f.push([Rr,p]),f}else{const f="baggage"in h?h.baggage:void 0,m=[];return Array.isArray(f)?m.push(...f):f&&m.push(f),p&&m.push(p),{...h,"sentry-trace":d,baggage:m.length>0?m.join(","):void 0}}else return{"sentry-trace":d,baggage:p}}function Km(t){try{return new URL(t).href}catch{return}}function Qm(t,e){if(e.response){rs(t,e.response.status);const n=e.response&&e.response.headers&&e.response.headers.get("content-length");if(n){const r=parseInt(n);r>0&&t.setAttribute("http.response_content_length",r)}}else e.error&&t.setStatus("internal_error");t.end()}const kr=["localhost",/^\/(?!\/)/],Pr={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:kr,tracePropagationTargets:kr};function Zm(t){const{traceFetch:e,traceXHR:n,tracePropagationTargets:r,tracingOrigins:s,shouldCreateSpanForRequest:i,enableHTTPTimings:o}={traceFetch:Pr.traceFetch,traceXHR:Pr.traceXHR,...t},a=typeof i=="function"?i:l=>!0,c=l=>rg(l,r||s),u={};e&&Mp(l=>{const d=Jm(l,a,c,u);if(d){const p=Ra(l.fetchData.url),h=p?In(p).host:void 0;d.setAttributes({"http.url":p,"server.address":h})}o&&d&&Oi(d)}),n&&Vp(l=>{const d=sg(l,a,c,u);o&&d&&Oi(d)})}function eg(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}function Oi(t){const{url:e}=B(t).data||{};if(!e||typeof e!="string")return;const n=ht("resource",({entries:r})=>{r.forEach(s=>{eg(s)&&s.name.endsWith(e)&&(ng(s).forEach(o=>t.setAttribute(...o)),setTimeout(n))})})}function tg(t){let e="unknown",n="unknown",r="";for(const s of t){if(s==="/"){[e,n]=t.split("/");break}if(!isNaN(Number(s))){e=r==="h"?"http":r,n=t.split(r)[1];break}r+=s}return r===t&&(e=r),{name:e,version:n}}function Z(t=0){return((Y||performance.timeOrigin)+t)/1e3}function ng(t){const{name:e,version:n}=tg(t.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",e]),Y?[...r,["http.request.redirect_start",Z(t.redirectStart)],["http.request.fetch_start",Z(t.fetchStart)],["http.request.domain_lookup_start",Z(t.domainLookupStart)],["http.request.domain_lookup_end",Z(t.domainLookupEnd)],["http.request.connect_start",Z(t.connectStart)],["http.request.secure_connection_start",Z(t.secureConnectionStart)],["http.request.connection_end",Z(t.connectEnd)],["http.request.request_start",Z(t.requestStart)],["http.request.response_start",Z(t.responseStart)],["http.request.response_end",Z(t.responseEnd)]]:r}function rg(t,e){return Ip(t,e||kr)}function sg(t,e,n,r){const s=t.xhr,i=s&&s[ot];if(!et()||!s||s.__sentry_own_request__||!i)return;const o=e(i.url);if(t.endTimestamp&&o){const h=s.__sentry_xhr_span_id__;if(!h)return;const f=r[h];f&&i.status_code!==void 0&&(rs(f,i.status_code),f.end(),delete r[h]);return}const a=Ze(),c=ns(),u=Ra(i.url),l=u?In(u).host:void 0,d=o?aa({name:`${i.method} ${i.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":i.method,"http.url":u,url:i.url,"server.address":l,[Te]:"auto.http.browser"},op:"http.client"}):void 0;d&&(s.__sentry_xhr_span_id__=d.spanContext().spanId,r[s.__sentry_xhr_span_id__]=d);const p=Qe();if(s.setRequestHeader&&n(i.url)&&p){const{traceId:h,spanId:f,sampled:m,dsc:_}={...c.getPropagationContext(),...a.getPropagationContext()},S=d?An(d):Qr(h,f,m),T=ta(_||(d?We(d):ts(h,p,a)));ig(s,S,T)}return d}function ig(t,e,n){try{t.setRequestHeader("sentry-trace",e),n&&t.setRequestHeader(Rr,n)}catch{}}function Ra(t){try{return new URL(t,w.location.origin).href}catch{return}}function og(t,e=!0,n=!0){if(!w||!w.location){b&&y.warn("Could not initialize routing instrumentation due to invalid location");return}let r=w.location.href,s;e&&(s=t({name:w.location.pathname,startTimestamp:Y?Y/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&Wp(({to:i,from:o})=>{if(o===void 0&&r&&r.indexOf(i)!==-1){r=void 0;return}o!==i&&(r=void 0,s&&(b&&y.log(`[Tracing] Finishing current transaction with op: ${s.op}`),s.end()),s=t({name:w.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})}const ag="BrowserTracing",cg={...Kt,markBackgroundTransactions:!0,routingInstrumentation:og,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...Pr},Ni=10;let ug=class{constructor(e){this.name=ag,this._hasSetTracePropagationTargets=!1,ga(),b&&(this._hasSetTracePropagationTargets=!!(e&&(e.tracePropagationTargets||e.tracingOrigins))),this.options={...cg,...e},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=Nm(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&Lm(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&km(),this.options._experiments.enableInteractions&&Pm(),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,n){this._getCurrentHub=n;const s=n().getClient(),i=s&&s.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:a,startTransactionOnPageLoad:c,markBackgroundTransactions:u,traceFetch:l,traceXHR:d,shouldCreateSpanForRequest:p,enableHTTPTimings:h,_experiments:f}=this.options,m=i&&i.tracePropagationTargets,_=m||this.options.tracePropagationTargets;b&&this._hasSetTracePropagationTargets&&m&&y.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o(S=>{const T=this._createRouteTransaction(S);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(T,S,n),T},c,a),u&&im(),f.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),Zm({traceFetch:l,traceXHR:d,tracePropagationTargets:_,shouldCreateSpanForRequest:p,enableHTTPTimings:h})}_createRouteTransaction(e){if(!this._getCurrentHub){b&&y.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`);return}const n=this._getCurrentHub(),{beforeNavigate:r,idleTimeout:s,finalTimeout:i,heartbeatInterval:o}=this.options,a=e.op==="pageload";let c;if(a){const h=a?ki("sentry-trace"):"",f=a?ki("baggage"):void 0,{traceId:m,dsc:_,parentSpanId:S,sampled:T}=ah(h,f);c={traceId:m,parentSpanId:S,parentSampled:T,...e,metadata:{...e.metadata,dynamicSamplingContext:_},trimEnd:!0}}else c={trimEnd:!0,...e};const u=typeof r=="function"?r(c):c,l=u===void 0?{...c,sampled:!1}:u;l.metadata=l.name!==c.name?{...l.metadata,source:"custom"}:l.metadata,this._latestRoute.name=l.name,this._latestRoute.context=l,l.sampled===!1&&b&&y.log(`[Tracing] Will not send ${l.op} transaction because of beforeNavigate.`),b&&y.log(`[Tracing] Starting ${l.op} transaction on scope`);const{location:d}=w,p=Ti(n,l,s,i,!0,{location:d},o,a);return a&&w.document&&(w.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(w.document.readyState)&&p.sendAutoFinishSignal()}),["interactive","complete"].includes(w.document.readyState)&&p.sendAutoFinishSignal()),p.registerBeforeFinishCallback(h=>{this._collectWebVitals(),Um(h)}),p}_registerInteractionListener(){let e;const n=()=>{const{idleTimeout:r,finalTimeout:s,heartbeatInterval:i}=this.options,o="ui.action.click",a=Ne();if(a&&a.op&&["navigation","pageload"].includes(a.op)){b&&y.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`);return}if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub){b&&y.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRoute.name){b&&y.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`);return}const c=this._getCurrentHub(),{location:u}=w,l={name:this._latestRoute.name,op:o,trimEnd:!0,data:{[he]:this._latestRoute.context?lg(this._latestRoute.context):"url"}};e=Ti(c,l,r,s,!0,{location:u},i)};["click"].forEach(r=>{w.document&&addEventListener(r,n,{once:!1,capture:!0})})}_registerInpInteractionListener(){const e=({entries:n})=>{const r=Qe(),s=r!==void 0&&r.getIntegrationByName!==void 0?r.getIntegrationByName("Replay"):void 0,i=s!==void 0?s.getReplayId():void 0,o=Ne(),a=Ze(),c=a!==void 0?a.getUser():void 0;n.forEach(u=>{if(dg(u)){const l=u.interactionId;if(l===void 0)return;const d=this._interactionIdToRouteNameMapping[l],p=u.duration,h=u.startTime,f=Object.keys(this._interactionIdToRouteNameMapping),m=f.length>0?f.reduce((_,S)=>this._interactionIdToRouteNameMapping[_].duration<this._interactionIdToRouteNameMapping[S].duration?_:S):void 0;if(u.entryType==="first-input"&&f.map(S=>this._interactionIdToRouteNameMapping[S]).some(S=>S.duration===p&&S.startTime===h)||!l)return;if(d)d.duration=Math.max(d.duration,p);else if(f.length<Ni||m===void 0||p>this._interactionIdToRouteNameMapping[m].duration){const _=this._latestRoute.name,S=this._latestRoute.context;_&&S&&(m&&Object.keys(this._interactionIdToRouteNameMapping).length>=Ni&&delete this._interactionIdToRouteNameMapping[m],this._interactionIdToRouteNameMapping[l]={routeName:_,duration:p,parentContext:S,user:c,activeTransaction:o,replayId:i,startTime:h})}}})};ht("event",e),ht("first-input",e)}};function ki(t){const e=Cp(`meta[name=${t}]`);return e?e.getAttribute("content"):void 0}function lg(t){const e=t.attributes&&t.attributes[he],n=t.data&&t.data[he],r=t.metadata&&t.metadata.source;return e||n||r}function dg(t){return"duration"in t}function fg(){const t=De();if(!t.__SENTRY__)return;const e={mongodb(){const r=be(fe,"./node/integrations/mongo");return new r.Mongo},mongoose(){const r=be(fe,"./node/integrations/mongo");return new r.Mongo},mysql(){const r=be(fe,"./node/integrations/mysql");return new r.Mysql},pg(){const r=be(fe,"./node/integrations/postgres");return new r.Postgres}},n=Object.keys(e).filter(r=>!!Oe(r)).map(r=>{try{return e[r]()}catch{return}}).filter(r=>r);n.length>0&&(t.__SENTRY__.integrations=[...t.__SENTRY__.integrations||[],...n])}function pg(){ga(),Qp()&&fg()}const hg=ug,mg={BrowserTracing:hg,Apollo:$n,Express:On,GraphQL:Dn,Mongo:Pn,Mysql:kn,Postgres:Nn,Prisma:Ln};(typeof __SENTRY_TRACING__>"u"||__SENTRY_TRACING__)&&pg();var Pi={};class gg{constructor(){this.isInitialized=!1,this.sentryDsn=Pi.SENTRY_DSN||"",this.environment="production",this.version=Pi.APP_VERSION||"1.0.0"}init(e=null){if(!this.sentryDsn||this.isInitialized)return!1;try{return bp({dsn:this.sentryDsn,integrations:[new mg.BrowserTracing],tracesSampleRate:this.environment==="production"?.1:1,environment:this.environment,release:this.version,beforeSend(n){if(n.message&&(n.message.includes("Cross-Origin Request Blocked")||n.message.includes("Extension")||n.message.includes("ResizeObserver loop")))return null;if(n.request&&n.request.url){const r=n.request.url;if(r.includes("chrome-extension://")||r.includes("moz-extension://"))return null}return n}}),e&&this.setUser(e),this.isInitialized=!0,console.log("Sentry initialized successfully"),!0}catch(n){return console.error("Error initializing Sentry:",n),!1}}setUser(e){if(!(!this.isInitialized||!e))try{qs({id:e.telegramId||e.id,username:e.username,name:`${e.firstName||""} ${e.lastName||""}`.trim()})}catch(n){console.error("Error setting user context:",n)}}clearUser(){if(this.isInitialized)try{qs(null)}catch(e){console.error("Error clearing user context:",e)}}captureException(e,n={}){if(!this.isInitialized){console.error(e);return}try{So(r=>{n.tags&&Object.entries(n.tags).forEach(([s,i])=>{r.setTag(s,i)}),n.extra&&Object.entries(n.extra).forEach(([s,i])=>{r.setExtra(s,i)}),n.level&&r.setLevel(n.level),xo(e)})}catch(r){console.error("Error sending exception to Sentry:",r),console.error("Original error:",e)}}captureMessage(e,n="info"){if(!this.isInitialized){console.log(e);return}try{jl(e,n)}catch(r){console.error("Error sending message to Sentry:",r)}}startTransaction(e){if(!this.isInitialized)return{finish:()=>{},setStatus:()=>{}};try{return(void 0)(e)}catch(n){return console.error("Error starting transaction:",n),{finish:()=>{},setStatus:()=>{}}}}}const Se=new gg;var _g={};const Aa=P.create({baseURL:_g.REACT_APP_API_URL||"/api",timeout:15e3,headers:{"Content-Type":"application/json"}});Aa.interceptors.request.use(t=>{const e=localStorage.getItem("token");e&&(t.headers.Authorization=`Bearer ${e}`);const n=localStorage.getItem("tg_init_data");return n&&(t.headers["X-Telegram-Init-Data"]=n),t},t=>(Se.captureException(t,{tags:{component:"httpService",type:"request"}}),Promise.reject(t)));Aa.interceptors.response.use(t=>t,t=>{var n,r,s,i;const e={tags:{component:"httpService",type:"response"},extra:{url:(n=t.config)==null?void 0:n.url,method:(r=t.config)==null?void 0:r.method,status:(s=t.response)==null?void 0:s.status}};return((i=t.response)==null?void 0:i.status)!==401&&Se.captureException(t,e),t.response&&t.response.status===401&&console.log("Unauthorized - token expired or invalid"),Promise.reject(t)});class yg{constructor(e,n){this.apiService=e,this.uiService=n,this.gameSession=null,this.currentStoryIndex=0,this.gameResults={correctAnswers:0,totalScore:0,bestStreak:0},this.timer=null,this.timerValue=15,this.timerBarElement=document.querySelector(".timer-bar"),this.timerTextElement=document.querySelector(".timer-text"),this.answerStartTime=null}async startGame(){const e=Se.startTransaction({op:"game",name:"start_game"});try{this.uiService.showLoading();const n=await this.apiService.startGame();if(n&&n.stories&&n.stories.length>0)this.gameSession=n,this.currentStoryIndex=0,this.gameResults={correctAnswers:0,totalScore:0,bestStreak:0},this.displayStory(this.currentStoryIndex);else throw new Error("Не удалось начать игру. Пожалуйста, попробуйте позже.");this.uiService.hideLoading(),e.finish()}catch(n){console.error("Start game error:",n),this.uiService.hideLoading(),this.uiService.showError("Не удалось начать игру. Пожалуйста, попробуйте позже."),e.setStatus("error"),e.finish()}}displayStory(e){if(!this.gameSession||!this.gameSession.stories||e>=this.gameSession.stories.length){console.error("Invalid story index or no stories available");return}const n=this.gameSession.stories[e];document.querySelector(".story-text").textContent=n.text;const r=document.querySelectorAll(".option");n.options.forEach((s,i)=>{r[i].textContent=s,r[i].classList.remove("correct","incorrect"),r[i].disabled=!1}),document.querySelector(".current-question").textContent=e+1,document.querySelector(".total-questions").textContent=this.gameSession.stories.length,document.querySelector(".streak-count").textContent=this.gameSession.streak||0,this.resetTimer(),this.startTimer(),this.answerStartTime=Date.now()}startTimer(){clearInterval(this.timer),this.timerValue=15,this.updateTimerUI(),this.timer=setInterval(()=>{this.timerValue--,this.updateTimerUI(),this.timerValue<=0&&(clearInterval(this.timer),this.handleTimerEnd())},1e3)}resetTimer(){clearInterval(this.timer),this.timerValue=15,this.updateTimerUI()}updateTimerUI(){if(this.timerBarElement&&this.timerTextElement){const e=this.timerValue/15*100;this.timerBarElement.style.width=`${e}%`,this.timerTextElement.textContent=this.timerValue,this.timerValue<=5?this.timerBarElement.style.backgroundColor="var(--error-color)":this.timerBarElement.style.backgroundColor="var(--accent-color)"}}handleTimerEnd(){this.submitAnswer(-1,!0)}async submitAnswer(e,n=!1){const r=Se.startTransaction({op:"game",name:"submit_answer"});try{clearInterval(this.timer),n&&document.querySelectorAll(".option").forEach(c=>{c.disabled=!0});const s=this.answerStartTime?Date.now()-this.answerStartTime:15e3,i={gameId:this.gameSession.id,storyId:this.gameSession.stories[this.currentStoryIndex]._id,selectedOption:n?null:e,responseTime:s};this.uiService.showLoading();const o=await this.apiService.submitAnswer(i);this.uiService.hideLoading(),o&&(this.gameSession=o.gameSession,this.showAnswerResult(o),document.querySelector(".streak-count").textContent=this.gameSession.streak||0),r.finish()}catch(s){throw console.error("Submit answer error:",s),this.uiService.hideLoading(),this.uiService.showError("Ошибка при отправке ответа. Пожалуйста, попробуйте еще раз."),r.setStatus("error"),r.finish(),Se.captureMessage(`Ошибка при отправке ответа: ${s.message}`,"error",{tags:{gameId:this.gameSession.id,questionId:this.gameSession.stories[this.currentStoryIndex]._id,answerId:n?null:e},extra:{responseTime}}),s}}showAnswerResult(e){const n=document.getElementById("answer-result-screen"),r=n.querySelector(".result-icon"),s=n.querySelector(".result-title"),i=n.querySelector(".explanation-text"),o=n.querySelector(".score-value"),a=n.querySelector(".streak-value"),c=n.querySelector(".next-btn");e.isCorrect?(r.innerHTML="✅",s.textContent="Правильно!",s.style.color="var(--success-color)",this.gameResults.correctAnswers++):(r.innerHTML="❌",s.textContent="Неверно!",s.style.color="var(--error-color)"),i.textContent=e.explanation,o.textContent=`+${e.pointsEarned||0}`,a.textContent=this.gameSession.streak||0,this.gameResults.totalScore+=e.pointsEarned||0,this.gameSession.streak>this.gameResults.bestStreak&&(this.gameResults.bestStreak=this.gameSession.streak),this.currentStoryIndex===this.gameSession.stories.length-1?c.textContent="Завершить игру":c.textContent="Следующая история",this.uiService.showScreen(n)}async nextStory(){this.currentStoryIndex++,this.currentStoryIndex<this.gameSession.stories.length?(this.uiService.showScreen(document.getElementById("game-screen")),this.displayStory(this.currentStoryIndex)):this.finishGame()}async finishGame(){const e=Se.startTransaction({op:"game",name:"finish_game"});try{this.uiService.showLoading();const n={gameId:this.gameSession.id},r=await this.apiService.finishGame(n);this.uiService.hideLoading(),r&&(this.gameResults={...this.gameResults,...r}),this.showGameResults(),e.finish()}catch(n){throw console.error("Finish game error:",n),this.uiService.hideLoading(),this.uiService.showError("Ошибка при завершении игры. Результаты могут быть не сохранены."),this.showGameResults(),e.setStatus("error"),e.finish(),Se.captureException(n,{tags:{component:"gameService",method:"finishGame",gameId:this.gameSession.id},level:"fatal"}),n}}showGameResults(){const e=document.getElementById("game-result-screen");document.getElementById("correct-answers").textContent=this.gameResults.correctAnswers,document.getElementById("total-score").textContent=this.gameResults.totalScore,document.getElementById("best-streak").textContent=this.gameResults.bestStreak,this.uiService.showScreen(e)}getGameResults(){return this.gameResults}}class Ca{constructor(){this.currentScreen=null,this.loadingElement=null,this.toastElement=null,this.init()}init(){if(!this.loadingElement){this.loadingElement=document.createElement("div"),this.loadingElement.className="loading-overlay hidden",this.loadingElement.innerHTML=`
        <div class="loading-spinner">
          <div class="spinner"></div>
        </div>
      `,document.body.appendChild(this.loadingElement);const e=document.createElement("style");e.textContent=`
        .loading-overlay {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: rgba(0, 0, 0, 0.7);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 9999;
        }
        
        .loading-overlay.hidden {
          display: none;
        }
        
        .loading-spinner {
          width: 50px;
          height: 50px;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .spinner {
          width: 40px;
          height: 40px;
          border: 4px solid rgba(255, 255, 255, 0.3);
          border-top: 4px solid var(--accent-color);
          border-radius: 50%;
          animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        
        .toast {
          position: fixed;
          bottom: 24px;
          left: 50%;
          transform: translateX(-50%);
          background-color: rgba(0, 0, 0, 0.8);
          color: white;
          padding: 12px 24px;
          border-radius: 4px;
          z-index: 9999;
          font-size: 14px;
          text-align: center;
          max-width: 80%;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
          opacity: 0;
          transition: opacity 0.3s ease;
        }
        
        .toast.visible {
          opacity: 1;
        }
        
        .toast.error {
          background-color: var(--error-color);
        }
        
        .toast.success {
          background-color: var(--success-color);
        }
      `,document.head.appendChild(e)}this.toastElement||(this.toastElement=document.createElement("div"),this.toastElement.className="toast",document.body.appendChild(this.toastElement))}showScreen(e){e&&(this.currentScreen&&(this.currentScreen.classList.remove("active"),this.currentScreen.classList.add("screen-exit"),setTimeout(()=>{this.currentScreen.classList.remove("screen-exit")},300)),e.classList.add("active"),e.classList.add("screen-enter"),setTimeout(()=>{e.classList.remove("screen-enter")},300),this.currentScreen=e,window.scrollTo(0,0))}showLoading(){this.loadingElement.classList.remove("hidden")}hideLoading(){this.loadingElement.classList.add("hidden")}showToast(e,n="info",r=3e3){this.toastElement.textContent=e,this.toastElement.className="toast",n==="error"?this.toastElement.classList.add("error"):n==="success"&&this.toastElement.classList.add("success"),setTimeout(()=>{this.toastElement.classList.add("visible")},10),setTimeout(()=>{this.toastElement.classList.remove("visible")},r)}showError(e){this.showToast(e,"error")}showSuccess(e){this.showToast(e,"success")}applyTheme(e){if(!e)return;const n=document.documentElement;if(e.text_color&&e.bg_color){if(this.isDarkColor(e.bg_color))document.body.classList.remove("theme-light");else{document.body.classList.add("theme-light"),n.style.setProperty("--bg-color",e.bg_color),n.style.setProperty("--text-color",e.text_color);const r=this.adjustBrightness(e.bg_color,-10);n.style.setProperty("--bg-secondary",r);const s=this.adjustOpacity(e.text_color,.7);n.style.setProperty("--text-secondary",s)}if(e.button_color){n.style.setProperty("--accent-color",e.button_color);const r=this.adjustBrightness(e.button_color,10);n.style.setProperty("--accent-hover",r);const s=`0 0 8px ${this.adjustOpacity(e.button_color,.6)}`;n.style.setProperty("--neon-glow",s)}}}isDarkColor(e){e=e.replace("#","");const n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return(n*299+r*587+s*114)/1e3<128}adjustBrightness(e,n){e=e.replace("#","");let r=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16);return r=this.clamp(r+n/100*255),s=this.clamp(s+n/100*255),i=this.clamp(i+n/100*255),`#${this.toHex(r)}${this.toHex(s)}${this.toHex(i)}`}adjustOpacity(e,n){e=e.replace("#","");const r=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16);return`rgba(${r}, ${s}, ${i}, ${n})`}clamp(e,n=0,r=255){return Math.min(Math.max(e,n),r)}toHex(e){const n=e.toString(16);return n.length===1?"0"+n:n}}const Li=Object.freeze(Object.defineProperty({__proto__:null,UiService:Ca},Symbol.toStringTag,{value:"Module"})),Sg="modulepreload",Eg=function(t){return"/"+t},Di={},$i=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Eg(c),c in Di)return;Di[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Sg,u||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((p,h)=>{d.addEventListener("load",p),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var bg={};class Tg{constructor(){var e,n;this.tg=(e=window.Telegram)==null?void 0:e.WebApp,this.user=null,this.apiBaseUrl=bg.REACT_APP_API_URL||"",this.initData=((n=this.tg)==null?void 0:n.initData)||"",this.authToken=localStorage.getItem("auth_token")||null}async init(){if(!this.tg)return console.warn("Telegram WebApp is not available"),!1;if(this.tg.expand(),this.tg.initDataUnsafe&&this.tg.initDataUnsafe.user&&(this.user=this.tg.initDataUnsafe.user),this.setupBackButton(),this.setupTheme(),this.initData)try{return this.authToken&&await this.validateToken(this.authToken)?!0:await this.authenticate()}catch(e){return console.error("Error during authentication:",e),!1}return!0}setupBackButton(){if(!this.tg)return;const e=document.querySelectorAll(".screen");this.tg.onEvent("backButtonClicked",()=>{const r=document.querySelector(".screen.active");r.id==="start-screen"?this.tg.close():r.id==="game-result-screen"?(document.getElementById("start-screen").classList.add("active"),r.classList.remove("active")):r.id==="game-screen"?confirm("Вы уверены, что хотите выйти? Прогресс игры будет потерян.")&&(document.getElementById("start-screen").classList.add("active"),r.classList.remove("active")):(document.getElementById("start-screen").classList.add("active"),r.classList.remove("active"))});const n=new MutationObserver(r=>{for(const s of r)if(s.type==="attributes"&&s.attributeName==="class"){const i=s.target;i.classList.contains("active")&&(i.id==="start-screen"?this.tg.BackButton.hide():this.tg.BackButton.show())}});for(const r of e)n.observe(r,{attributes:!0})}setupTheme(){!this.tg||!this.tg.themeParams||($i(()=>Promise.resolve().then(()=>Li),void 0).then(e=>{new e.UiService().applyTheme(this.tg.themeParams)}),this.tg.onEvent("themeChanged",()=>{$i(()=>Promise.resolve().then(()=>Li),void 0).then(e=>{new e.UiService().applyTheme(this.tg.themeParams)})}))}async authenticate(){try{if(!this.initData)return console.error("No initData available for authentication"),!1;const e=await fetch(`${this.apiBaseUrl}/api/webapp/auth`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initData:this.initData})});if(!e.ok){const r=await e.json();return console.error("Authentication error:",r),!1}const n=await e.json();return n.success&&n.token?(this.authToken=n.token,localStorage.setItem("auth_token",n.token),n.user&&localStorage.setItem("user_data",JSON.stringify(n.user)),!0):!1}catch(e){return console.error("Authentication error:",e),!1}}async validateToken(e){try{return(await fetch(`${this.apiBaseUrl}/api/user/profile`,{method:"GET",headers:{Authorization:`Bearer ${e}`}})).ok}catch(n){return console.error("Token validation error:",n),!1}}getAuthHeaders(){const e={"Content-Type":"application/json"};return this.authToken?e.Authorization=`Bearer ${this.authToken}`:this.initData&&(e["Telegram-Data"]=this.initData),e}getUserInfo(){return this.user}shareResults(e){if(!this.tg)return;const n=`🎮 Я сыграл в "Криминальный Блеф"!

✅ Правильных ответов: ${e.correctAnswers}/5
🔥 Лучшая серия: ${e.bestStreak}
💯 Набрано очков: ${e.totalScore}

Проверь свои детективные способности!`;this.tg.showPopup({title:"Поделиться результатами",message:"Поделиться своими результатами игры с друзьями?",buttons:[{id:"share",type:"default",text:"Поделиться"},{id:"cancel",type:"cancel",text:"Отмена"}]},r=>{r==="share"&&this.tg.sendData(JSON.stringify({action:"share_results",text:n}))})}close(){this.tg&&this.tg.close()}showPopup(e,n,r,s){this.tg&&this.tg.showPopup({title:e,message:n,buttons:r},s)}showAlert(e){this.tg&&this.tg.showAlert(e)}setupMainButton(e,n,r=!0,s=!0){!this.tg||!this.tg.MainButton||(this.tg.MainButton.text=e,this.tg.MainButton.onClick(n),r?this.tg.MainButton.show():this.tg.MainButton.hide(),s?this.tg.MainButton.enable():this.tg.MainButton.disable())}async getWebAppConfig(){try{const e=await fetch(`${this.apiBaseUrl}/api/webapp/config`,{headers:this.getAuthHeaders()});if(!e.ok)throw new Error("Failed to get WebApp config");return(await e.json()).config}catch(e){return console.error("Error getting WebApp config:",e),null}}}class vg{constructor(e){this.telegramService=e,this.container=document.getElementById("start-screen"),this.startGameBtn=this.container.querySelector("#start-game-btn"),this.profileBtn=this.container.querySelector("#profile-btn"),this.leaderboardBtn=this.container.querySelector("#leaderboard-btn"),this.logoContainer=this.container.querySelector(".logo-container"),this.userInfo=this.container.querySelector(".user-info")}init(){this.renderLogo(),this.renderUserInfo(),this.bindEvents()}renderLogo(){const e=this.createLogoSVG();this.logoContainer.innerHTML=e,this.animateLogo()}createLogoSVG(){return`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 80" class="game-logo">
        <defs>
          <linearGradient id="logo-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#FF6B6B" />
            <stop offset="100%" stop-color="#4ECDC4" />
          </linearGradient>
          <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
            <feGaussianBlur stdDeviation="2" result="blur" />
            <feMerge>
              <feMergeNode in="blur" />
              <feMergeNode in="SourceGraphic" />
            </feMerge>
          </filter>
        </defs>
        <text x="50%" y="60%" text-anchor="middle" class="logo-text" filter="url(#glow)" fill="url(#logo-gradient)">
          КРИМИНАЛЬНЫЙ
        </text>
        <text x="50%" y="85%" text-anchor="middle" class="logo-text-shadow" fill="#2E294E">
          БЛЕФ
        </text>
      </svg>
    `}animateLogo(){const e=this.container.querySelector(".logo-text"),n=this.container.querySelector(".logo-text-shadow");e&&n&&(e.style.opacity="0",e.style.transform="translateY(-20px)",n.style.opacity="0",n.style.transform="translateY(20px)",setTimeout(()=>{e.style.transition="all 0.5s ease-out",e.style.opacity="1",e.style.transform="translateY(0)",setTimeout(()=>{n.style.transition="all 0.5s ease-out",n.style.opacity="1",n.style.transform="translateY(0)"},300)},100))}renderUserInfo(){const e=this.telegramService.getUserInfo();if(e){const n=e.first_name||e.username||"Игрок",r=e.photo_url||"";this.userInfo.innerHTML=`
        <div class="user-avatar-container">
          ${r?`<img src="${r}" class="user-avatar" alt="${n}">`:'<div class="user-avatar-placeholder"></div>'}
        </div>
        <div class="user-name">${n}</div>
      `}else this.userInfo.innerHTML=`
        <div class="user-avatar-container">
          <div class="user-avatar-placeholder"></div>
        </div>
        <div class="user-name">Игрок</div>
      `}bindEvents(){this.startGameBtn.addEventListener("click",()=>{this.container.dispatchEvent(new CustomEvent("startGame"))}),this.profileBtn.addEventListener("click",()=>{this.container.dispatchEvent(new CustomEvent("showProfile"))}),this.leaderboardBtn.addEventListener("click",()=>{this.container.dispatchEvent(new CustomEvent("showLeaderboard"))})}setPulseEffect(e){e?this.startGameBtn.classList.add("pulse-animation"):this.startGameBtn.classList.remove("pulse-animation")}}class wg{constructor(e,n){this.gameService=e,this.uiService=n,this.container=document.getElementById("game-screen"),this.storyContainer=this.container.querySelector(".story-container"),this.optionsContainer=this.container.querySelector(".options-container"),this.progressBar=this.container.querySelector(".progress-bar"),this.storyCounter=this.container.querySelector(".story-counter"),this.timer=this.container.querySelector(".timer"),this.timerInterval=null,this.timerValue=15}init(e,n,r){this.resetTimer(),this.renderStory(e),this.updateProgress(n,r),this.startTimer(),this.bindEvents()}renderStory(e){this.storyContainer.innerHTML=`
      <p class="story-text">${e.text}</p>
    `,this.optionsContainer.innerHTML=e.options.map((n,r)=>`
      <button class="option" data-index="${r}">
        <span class="option-letter">${String.fromCharCode(65+r)}</span>
        <span class="option-text">${n}</span>
      </button>
    `).join("")}updateProgress(e,n){const r=(e+1)/n*100;this.progressBar.style.width=`${r}%`,this.storyCounter.textContent=`${e+1} из ${n}`}startTimer(){this.timerValue=15,this.updateTimerDisplay(),this.timerInterval=setInterval(()=>{this.timerValue--,this.updateTimerDisplay(),this.timerValue<=0&&(clearInterval(this.timerInterval),this.gameService.timeOut()),this.timerValue<=5&&this.timer.classList.add("timer-warning")},1e3)}updateTimerDisplay(){this.timer.textContent=this.timerValue}resetTimer(){this.timerInterval&&clearInterval(this.timerInterval),this.timerValue=15,this.timer.classList.remove("timer-warning"),this.updateTimerDisplay()}bindEvents(){this.optionsContainer.addEventListener("click",e=>{const n=e.target.closest(".option");if(n){const r=parseInt(n.getAttribute("data-index"));this.resetTimer(),this.gameService.submitAnswer(r)}})}showResult(e,n){this.optionsContainer.querySelectorAll(".option").forEach((s,i)=>{i===n?s.classList.add("correct"):i===e&&e!==n&&s.classList.add("incorrect")})}deactivate(){this.resetTimer()}}class Ig{constructor(e){this.telegramService=e,this.container=document.getElementById("game-result-screen"),this.scoreElement=this.container.querySelector(".final-score"),this.correctAnswersElement=this.container.querySelector(".correct-answers"),this.streakElement=this.container.querySelector(".best-streak"),this.achievementsContainer=this.container.querySelector(".achievements-container"),this.playAgainBtn=this.container.querySelector("#play-again-btn"),this.shareResultBtn=this.container.querySelector("#share-result-btn")}init(e){this.renderResults(e),this.bindEvents(e)}renderResults(e){this.scoreElement.textContent=e.totalScore,this.correctAnswersElement.textContent=e.correctAnswers,this.streakElement.textContent=e.bestStreak,e.newAchievements&&e.newAchievements.length>0?this.renderAchievements(e.newAchievements):this.achievementsContainer.style.display="none",this.animateScore(e.totalScore)}animateScore(e){const s=performance.now(),i=o=>{const a=o-s,c=Math.min(a/1e3,1),u=this.easeOutQuart(c),l=Math.floor(0+u*(e-0));this.scoreElement.textContent=l,c<1?requestAnimationFrame(i):this.scoreElement.textContent=e};requestAnimationFrame(i)}easeOutQuart(e){return 1-Math.pow(1-e,4)}renderAchievements(e){this.achievementsContainer.style.display="block";const n=this.achievementsContainer.querySelector(".achievements-list");n.innerHTML="",e.forEach(r=>{const s=document.createElement("div");s.className="achievement-item new-achievement",s.innerHTML=`
        <div class="achievement-icon">${this.getAchievementIcon(r.name)}</div>
        <div class="achievement-name">${r.name}</div>
        <div class="achievement-description">${r.description}</div>
      `,n.appendChild(s)})}getAchievementIcon(e){return{Новичок:"🎮",Эксперт:"🧠","Мастер дедукции":"🔍","Скоростной детектив":"⚡","Серийный игрок":"🏆"}[e]||"🎯"}bindEvents(e){this.playAgainBtn.addEventListener("click",()=>{}),this.shareResultBtn.addEventListener("click",()=>{this.telegramService.shareResults(e)})}}class Rg{constructor(e,n,r){this.apiService=e,this.uiService=n,this.telegramService=r,this.container=document.getElementById("profile-screen"),this.userNameElement=this.container.querySelector("#user-name"),this.userAvatarElement=this.container.querySelector("#user-avatar"),this.gamesPlayedElement=this.container.querySelector("#games-played"),this.accuracyElement=this.container.querySelector("#accuracy"),this.bestStreakElement=this.container.querySelector("#profile-best-streak"),this.rankPositionElement=this.container.querySelector("#rank-position"),this.achievementsListElement=this.container.querySelector("#achievements-list"),this.statsChartContainer=this.container.querySelector(".stats-chart-container")}async init(){try{this.uiService.showLoading();const e=await this.apiService.getUserProfile();if(e){this.renderProfileData(e);const n=await this.apiService.getUserPosition();this.renderRankPosition(n);const r=await this.apiService.getUserStats();this.renderStatsChart(r)}else this.uiService.showError("Не удалось загрузить данные профиля");this.uiService.hideLoading()}catch(e){console.error("Error loading profile:",e),this.uiService.hideLoading(),this.uiService.showError("Ошибка при загрузке профиля")}}renderProfileData(e){this.userNameElement.textContent=e.username||"Игрок",e.photoUrl?(this.userAvatarElement.src=e.photoUrl,this.userAvatarElement.style.display="block"):this.userAvatarElement.style.display="none",this.gamesPlayedElement.textContent=e.gamesPlayed||0;const n=e.gamesPlayed>0?Math.round(e.correctAnswers/(e.gamesPlayed*5)*100):0;this.accuracyElement.textContent=`${n}%`,this.bestStreakElement.textContent=e.bestStreak||0,this.renderAchievements(e.achievements)}renderAchievements(e){const n=[{name:"Новичок",description:"Сыграть первую игру",icon:"🎮"},{name:"Эксперт",description:"10 правильных ответов подряд",icon:"🧠"},{name:"Мастер дедукции",description:"100% точность в 5 играх подряд",icon:"🔍"},{name:"Скоростной детектив",description:"Правильный ответ за 3 секунды",icon:"⚡"},{name:"Серийный игрок",description:"100 сыгранных игр",icon:"🏆"}];this.achievementsListElement.innerHTML="",n.forEach(r=>{const s=Array.isArray(e)&&e.some(o=>o.name===r.name),i=document.createElement("div");i.className=`achievement-item ${s?"":"achievement-locked"}`,i.innerHTML=`
        <div class="achievement-icon">${r.icon}</div>
        <div class="achievement-info">
          <div class="achievement-name">${r.name}</div>
          <div class="achievement-description">${r.description}</div>
          ${s?'<div class="achievement-unlocked">✓ Получено</div>':""}
        </div>
      `,this.achievementsListElement.appendChild(i)})}renderRankPosition(e){if(!e){this.rankPositionElement.textContent="N/A";return}this.rankPositionElement.textContent=e.global?`#${e.global}`:"N/A";const n=document.createElement("div");n.className="rank-info",n.innerHTML=`
      <div class="rank-detail">
        <span class="rank-label">Глобальный:</span>
        <span class="rank-value">${e.global?`#${e.global}`:"N/A"}</span>
      </div>
      <div class="rank-detail">
        <span class="rank-label">Недельный:</span>
        <span class="rank-value">${e.weekly?`#${e.weekly}`:"N/A"}</span>
      </div>
      <div class="rank-detail">
        <span class="rank-label">Дневной:</span>
        <span class="rank-value">${e.daily?`#${e.daily}`:"N/A"}</span>
      </div>
    `;const r=this.rankPositionElement.parentElement,s=r.querySelector(".rank-info");s?r.replaceChild(n,s):r.appendChild(n)}renderStatsChart(e){if(!e){this.statsChartContainer.innerHTML='<p class="text-secondary">Недостаточно данных для отображения статистики</p>';return}if(this.statsChartContainer.innerHTML="",e.categoryDistribution){const n=document.createElement("div");n.className="stats-chart category-chart",n.innerHTML=`
        <h4>Категории</h4>
        <div class="chart-container" id="category-chart"></div>
      `,this.statsChartContainer.appendChild(n),this.renderPieChart("category-chart",e.categoryDistribution)}if(e.difficultyDistribution){const n=document.createElement("div");n.className="stats-chart difficulty-chart",n.innerHTML=`
        <h4>Сложность</h4>
        <div class="chart-container" id="difficulty-chart"></div>
      `,this.statsChartContainer.appendChild(n),this.renderPieChart("difficulty-chart",e.difficultyDistribution)}if(e.weeklyActivity){const n=document.createElement("div");n.className="stats-chart activity-chart",n.innerHTML=`
        <h4>Активность</h4>
        <div class="chart-container" id="activity-chart"></div>
      `,this.statsChartContainer.appendChild(n),this.renderBarChart("activity-chart",e.weeklyActivity)}}renderPieChart(e,n){const r=document.getElementById(e),s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","0 0 100 100"),r.appendChild(s);const i=Object.values(n).reduce((l,d)=>l+d,0),o=Object.entries(n).map(([l,d])=>({label:l,value:d,percentage:d/i*100})),a=["#FF6B6B","#4ECDC4","#FFD166","#F7FFF7","#A2D729","#1A535C"];let c=0;o.forEach((l,d)=>{const p=l.percentage/100*360,h=c+p,f=50+40*Math.cos(Math.PI*c/180),m=50+40*Math.sin(Math.PI*c/180),_=50+40*Math.cos(Math.PI*h/180),S=50+40*Math.sin(Math.PI*h/180),T=document.createElementNS("http://www.w3.org/2000/svg","path"),I=p>180?1:0;T.setAttribute("d",`M50,50 L${f},${m} A40,40 0 ${I},1 ${_},${S} Z`),T.setAttribute("fill",a[d%a.length]),s.appendChild(T),c=h});const u=document.createElement("div");u.className="chart-legend",o.forEach((l,d)=>{const p=document.createElement("div");p.className="legend-item",p.innerHTML=`
        <span class="legend-color" style="background-color: ${a[d%a.length]}"></span>
        <span class="legend-label">${l.label}</span>
        <span class="legend-value">${l.percentage.toFixed(1)}%</span>
      `,u.appendChild(p)}),r.appendChild(u)}renderBarChart(e,n){const r=document.getElementById(e),s=Math.max(...Object.values(n)),i=document.createElement("div");i.className="bar-chart-container",Object.entries(n).forEach(([o,a])=>{const c=document.createElement("div");c.className="bar-container";const u=document.createElement("div");u.className="bar",u.style.height=`${a/s*100}%`;const l=document.createElement("div");l.className="bar-label",l.textContent=o;const d=document.createElement("div");d.className="bar-value",d.textContent=a,c.appendChild(u),c.appendChild(l),c.appendChild(d),i.appendChild(c)}),r.appendChild(i)}}class Ag{constructor(e,n){this.apiService=e,this.uiService=n,this.container=document.getElementById("leaderboard-screen"),this.leaderboardTable=this.container.querySelector(".leaderboard-table"),this.tabButtons=this.container.querySelectorAll(".tab-btn"),this.neighborsContainer=this.container.querySelector(".neighbors-container"),this.paginationContainer=this.container.querySelector(".pagination"),this.currentPage=1,this.itemsPerPage=10,this.currentPeriod="daily"}async init(){this.bindEvents(),await this.loadLeaderboard(this.currentPeriod)}async loadLeaderboard(e,n=1){try{this.uiService.showLoading(),this.currentPeriod=e,this.currentPage=n,this.tabButtons.forEach(s=>{s.classList.toggle("active",s.getAttribute("data-period")===e)});const r=await this.apiService.getLeaderboard(e,n,this.itemsPerPage);if(r&&r.leaderboard){this.renderLeaderboard(r.leaderboard),this.renderPagination(r.pagination);const s=await this.apiService.getUserNeighbors(e);s&&this.renderNeighbors(s)}else this.leaderboardTable.innerHTML='<tr><td colspan="4" class="text-center">Нет данных</td></tr>',this.neighborsContainer.style.display="none";this.uiService.hideLoading()}catch(r){console.error("Error loading leaderboard:",r),this.uiService.hideLoading(),this.uiService.showError("Не удалось загрузить таблицу лидеров")}}renderLeaderboard(e){this.leaderboardTable.innerHTML="";const n=document.createElement("thead");n.innerHTML=`
      <tr>
        <th>Ранг</th>
        <th>Игрок</th>
        <th>Счет</th>
        <th>Игры</th>
      </tr>
    `,this.leaderboardTable.appendChild(n);const r=document.createElement("tbody");e.length===0?r.innerHTML='<tr><td colspan="4" class="text-center">Нет данных</td></tr>':e.forEach(s=>{const i=document.createElement("tr");s.isCurrentUser&&i.classList.add("current-user"),i.innerHTML=`
          <td class="rank">${s.rank}</td>
          <td class="username">
            ${s.photoUrl?`<img src="${s.photoUrl}" class="avatar" alt="${s.username}">`:""}
            <span>${s.username}</span>
          </td>
          <td class="score">${s.score}</td>
          <td class="games">${s.gamesPlayed||"-"}</td>
        `,r.appendChild(i)}),this.leaderboardTable.appendChild(r)}renderPagination(e){if(!e||e.totalPages<=1){this.paginationContainer.style.display="none";return}this.paginationContainer.style.display="flex",this.paginationContainer.innerHTML="";const n=document.createElement("button");n.className="pagination-btn prev",n.disabled=e.currentPage===1,n.textContent="←",n.addEventListener("click",()=>{e.currentPage>1&&this.loadLeaderboard(this.currentPeriod,e.currentPage-1)}),this.paginationContainer.appendChild(n),this.createPageNumbers(e);const r=document.createElement("button");r.className="pagination-btn next",r.disabled=e.currentPage===e.totalPages,r.textContent="→",r.addEventListener("click",()=>{e.currentPage<e.totalPages&&this.loadLeaderboard(this.currentPeriod,e.currentPage+1)}),this.paginationContainer.appendChild(r)}createPageNumbers(e){const{currentPage:n,totalPages:r}=e;let s=Math.max(1,n-2),i=Math.min(r,s+4);if(i-s<4&&(s=Math.max(1,i-4)),s>1&&(this.addPageButton(1,n),s>2)){const o=document.createElement("span");o.className="pagination-ellipsis",o.textContent="...",this.paginationContainer.appendChild(o)}for(let o=s;o<=i;o++)this.addPageButton(o,n);if(i<r){if(i<r-1){const o=document.createElement("span");o.className="pagination-ellipsis",o.textContent="...",this.paginationContainer.appendChild(o)}this.addPageButton(r,n)}}addPageButton(e,n){const r=document.createElement("button");r.className=`pagination-btn page-num ${e===n?"active":""}`,r.textContent=e,r.addEventListener("click",()=>{e!==n&&this.loadLeaderboard(this.currentPeriod,e)}),this.paginationContainer.appendChild(r)}renderNeighbors(e){if(!e||!e.currentUser){this.neighborsContainer.style.display="none";return}this.neighborsContainer.style.display="block";const n=this.neighborsContainer.querySelector(".neighbors-table");n.innerHTML="",e.above&&e.above.length>0&&e.above.forEach(r=>{this.addNeighborRow(n,r)}),this.addNeighborRow(n,e.currentUser,!0),e.below&&e.below.length>0&&e.below.forEach(r=>{this.addNeighborRow(n,r)})}addNeighborRow(e,n,r=!1){const s=document.createElement("tr");r&&s.classList.add("current-user"),s.innerHTML=`
      <td class="rank">${n.rank}</td>
      <td class="username">
        ${n.photoUrl?`<img src="${n.photoUrl}" class="avatar" alt="${n.username}">`:""}
        <span>${n.username}</span>
      </td>
      <td class="score">${n.score}</td>
      <td class="games">${n.gamesPlayed||"-"}</td>
    `,e.appendChild(s)}bindEvents(){this.tabButtons.forEach(e=>{e.addEventListener("click",()=>{const n=e.getAttribute("data-period");this.loadLeaderboard(n)})})}}document.addEventListener("DOMContentLoaded",()=>{const t=new Oa,e=new Ca,n=new Tg,r=new yg(t,e);n.init();const s=new vg(n),i=new wg(r,e),o=new Ig(n),a=new Rg(t,e,n),c=new Ag(t,e),u=document.getElementById("start-screen"),l=document.getElementById("game-screen"),d=document.getElementById("answer-result-screen"),p=document.getElementById("game-result-screen"),h=document.getElementById("profile-screen"),f=document.getElementById("leaderboard-screen");s.init(),u.addEventListener("startGame",async()=>{e.showScreen(l);const m=await r.startGame();m&&i.init(m.stories[0],m.currentStory,m.stories.length)}),u.addEventListener("showProfile",async()=>{e.showScreen(h),await a.init()}),u.addEventListener("showLeaderboard",async()=>{e.showScreen(f),await c.init()}),r.onGameStart=m=>{i.init(m.stories[0],m.currentStory,m.stories.length)},r.onAnswerSubmit=(m,_,S)=>{i.showResult(m,_),document.querySelector(".answer-explanation").textContent=S,setTimeout(()=>{e.showScreen(d)},1e3)},r.onNextStory=(m,_,S)=>{e.showScreen(l),i.init(m,_,S)},r.onGameComplete=m=>{e.showScreen(p),o.init(m)},document.querySelector(".next-btn").addEventListener("click",()=>{r.nextStory()}),document.querySelector("#play-again-btn").addEventListener("click",async()=>{e.showScreen(l);const m=await r.startGame();m&&i.init(m.stories[0],m.currentStory,m.stories.length)}),document.querySelector("#profile-back-btn").addEventListener("click",()=>{e.showScreen(u)}),document.querySelector("#leaderboard-back-btn").addEventListener("click",()=>{e.showScreen(u)}),n.onInitComplete=()=>{n.setupBackButton(m=>{if(m){let _=e.getCurrentScreen();if(_===h||_===f)return()=>e.showScreen(u);if(_===p)return()=>{e.showScreen(u),n.hideBackButton()};if(_===d)return()=>{e.showScreen(l),n.showBackButton()};if(_===l)return()=>{confirm("Вы уверены, что хотите прервать игру?")&&(e.showScreen(u),n.hideBackButton(),r.abandonGame())}}return null})},window.onerror=function(m,_,S,T,I){return console.error("Error:",I),e.showError("Произошла ошибка. Пожалуйста, перезапустите приложение."),!0},n.onThemeChange=m=>{m.text_color&&m.bg_color&&(document.documentElement.style.setProperty("--tg-theme-text-color",m.text_color),document.documentElement.style.setProperty("--tg-theme-bg-color",m.bg_color),document.documentElement.style.setProperty("--tg-theme-button-color",m.button_color||"#2AABEE"),document.documentElement.style.setProperty("--tg-theme-button-text-color",m.button_text_color||"#FFFFFF"))},n.applyTelegramTheme()})});export default Cg();
